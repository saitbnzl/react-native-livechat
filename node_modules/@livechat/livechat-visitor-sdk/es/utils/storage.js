import memoryStorage, { testStorageSupport } from 'memory-web-storage';
// TODO: this prefix is shared state, each SDK instance probably need its own
var prefix = '';

var storage = testStorageSupport() ? window.localStorage : memoryStorage;

export var setItem = function setItem(name, value) {
	storage.setItem(prefix + name, value);
};

export var getItem = function getItem(name) {
	return storage.getItem(prefix + name);
};

export var removeItem = function removeItem(name) {
	storage.removeItem(prefix + name);
};

export var setPrefix = function setPrefix(newPrefix) {
	prefix = newPrefix;
};

export default {
	setItem: setItem,
	getItem: getItem,
	removeItem: removeItem,
	setPrefix: setPrefix
};