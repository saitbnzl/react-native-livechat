!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.LivechatVisitorSDK={})}(this,function(e){"use strict";function t(e,t){return t={exports:{}},e(t,t.exports),t.exports}function r(e,t,r){if(!t(e))throw c("error","uncaught at check",r),Error(r)}function n(e,t){return rt.notUndef(e)&&tt.call(e,t)}function o(e,t){var r=e.indexOf(t);0>r||e.splice(r,1)}function a(){var e=ze({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=new Promise(function(t,r){e.resolve=t,e.reject=r});return e.promise=t,e}function i(e){var t=1>=arguments.length||void 0===arguments[1]||arguments[1],r=void 0,n=new Promise(function(n){r=setTimeout(function(){return n(t)},e)});return n[Ye]=function(){return clearTimeout(r)},n}function u(e){var t={name:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",next:e,throw:arguments.length>1&&void 0!==arguments[1]?arguments[1]:it,return:ut};return arguments[3]&&(t[Ke]=!0),"undefined"!=typeof Symbol&&(t[Symbol.iterator]=function(){return t}),t}function c(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"undefined"==typeof window?console.log("redux-saga "+e+": "+t+"\n"+(r&&r.stack||r)):console[e](t,r)}function s(e,t){return function(){return e.apply(void 0,arguments)}}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments[1],r=Array(e),n=0,o=0,a=0,i=function(t){r[o]=t,o=(o+1)%e,n++},u=function(){if(0!=n){var t=r[a];return r[a]=null,n--,a=(a+1)%e,t}},c=function(){for(var e=[];n;)e.push(u());return e};return{isEmpty:function(){return 0==n},put:function(u){if(e>n)i(u);else{var s=void 0;switch(t){case gt:throw Error(ht);case vt:r[o]=u,a=o=(o+1)%e;break;case mt:s=2*e,r=c(),n=r.length,o=r.length,a=0,r.length=s,e=s,i(u)}}},take:u,flush:c}}function l(e){try{d(),e()}finally{h()}}function p(e){xt.push(e),_t||(d(),g())}function d(){_t++}function h(){_t--}function g(){h();for(var e=void 0;!_t&&void 0!==(e=xt.shift());)l(e)}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bt.none(),n=arguments[2];arguments.length>2&&r(n,rt.func,"Invalid match function passed to eventChannel");var a=function(){function e(){if(n&&a.length)throw st("Cannot have a closed channel with pending takers");if(a.length&&!t.isEmpty())throw st("Cannot have pending takers with non empty buffer")}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt.fixed(),n=!1,a=[];return r(t,rt.buffer,Et),{take:function(i){e(),r(i,rt.func,"channel.take's callback must be a function"),n&&t.isEmpty()?i(At):t.isEmpty()?(a.push(i),i.cancel=function(){return o(a,i)}):i(t.take())},put:function(o){if(e(),r(o,rt.notUndef,Tt),!n){if(!a.length)return t.put(o);for(var i=0;a.length>i;i++){var u=a[i];if(!u[$e]||u[$e](o))return a.splice(i,1),u(o)}}},flush:function(o){e(),r(o,rt.func,"channel.flush' callback must be a function"),o(n&&t.isEmpty()?At:t.flush())},close:function(){if(e(),!n&&(n=!0,a.length)){var t=a;a=[];for(var r=0,o=t.length;o>r;r++)t[r](At)}},get __takers__(){return a},get __closed__(){return n}}}(t),i=function(){a.__closed__||(u&&u(),a.close())},u=e(function(e){jt(e)?i():n&&!n(e)||a.put(e)});if(a.__closed__&&u(),!rt.func(u))throw Error("in eventChannel: subscribe should return a function to unsubscribe");return{take:a.take,flush:a.flush,close:i}}function m(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),o=2;r>o;o++)n[o-2]=arguments[o];var a={done:!1,value:y(e)},i=void 0,c=function(e){return i=e};return function(e,t){function r(t,r){if(o===dt)return pt;if(r)throw o=dt,r;n&&n(t);var a=e[o]();return o=a[0],n=a[2],o===dt?pt:a[1]}var n=void 0,o=t;return u(r,function(e){return r(null,e)},arguments.length>2&&void 0!==arguments[2]?arguments[2]:"iterator",!0)}({q1:function(){return["q2",a,c]},q2:function(){return i===At?[dt]:["q1",function(e){return{done:!1,value:w.apply(void 0,[t].concat(n,[e]))}}(i)]}},"q1","takeEvery("+function(e){return rt.channel(e)?"channel":Array.isArray(e)?e.map(function(e){return e+""})+"":e+""}(e)+", "+t.name+")")}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*";if(arguments.length&&r(arguments[0],rt.notUndef,"take(patternOrChannel): patternOrChannel is undefined"),rt.pattern(e))return Ut(Ot,{pattern:e});if(rt.channel(e))return Ut(Ot,{channel:e});throw Error("take(patternOrChannel): argument "+e+" is not valid channel or a valid pattern")}function b(e,t){return arguments.length>1?(r(e,rt.notUndef,"put(channel, action): argument channel is undefined"),r(e,rt.channel,"put(channel, action): argument "+e+" is not a valid channel"),r(t,rt.notUndef,"put(channel, action): argument action is undefined")):(r(e,rt.notUndef,"put(action): argument action is undefined"),t=e,e=null),Ut(St,{channel:e,action:t})}function x(e){return Ut(Rt,e)}function _(e,t,n){r(t,rt.notUndef,e+": argument fn is undefined");var o=null;if(rt.array(t)){o=t[0],t=t[1]}else if(t.fn){o=t.context,t=t.fn}return o&&rt.string(t)&&rt.func(o[t])&&(t=o[t]),r(t,rt.func,e+": argument "+t+" is not a function"),{context:o,fn:t,args:n}}function I(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;t>n;n++)r[n-1]=arguments[n];return Ut(Ct,_("call",e,r))}function w(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;t>n;n++)r[n-1]=arguments[n];return Ut(Pt,_("fork",e,r))}function A(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;t>n;n++)r[n-1]=arguments[n];var o=w.apply(void 0,[e].concat(r));return o[Pt].detached=!0,o}function j(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(t.length>1)return x(t.map(function(e){return j(e)}));var o=t[0];return 1===t.length&&(r(o,rt.notUndef,"cancel(task): argument task is undefined"),r(o,rt.task,"cancel(task): argument "+o+" is not a valid Task object "+Dt)),Ut(Nt,o||Ze)}function E(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;t>o;o++)n[o-1]=arguments[o];return 0===arguments.length?e=et:(r(e,rt.notUndef,"select(selector,[...]): argument selector is undefined"),r(e,rt.func,"select(selector,[...]): argument "+e+" is not a function")),Ut(Lt,{selector:e,args:n})}function T(e,t){return r(e,rt.notUndef,"actionChannel(pattern,...): argument pattern is undefined"),arguments.length>1&&(r(t,rt.notUndef,"actionChannel(pattern, buffer): argument buffer is undefined"),r(t,rt.buffer,"actionChannel(pattern, buffer): argument "+t+" is not a valid buffer")),Ut(Mt,{pattern:e,buffer:t})}function k(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),o=2;r>o;o++)n[o-2]=arguments[o];return w.apply(void 0,[m,e,t].concat(n))}function O(e){return("*"===e?Kt.wildcard:rt.array(e)?Kt.array:rt.stringableFunc(e)?Kt.default:rt.func(e)?Kt.predicate:Kt.default)(e)}function S(e){function t(){e._isRunning&&!e._isCancelled&&(e._isCancelled=!0,D.cancelAll(),i(Ht))}function n(t,r){if(!M.isRunning)throw Error("Trying to resume an already finished generator");try{var o=void 0;r?o=e.throw(t):t===Ht?(M.isCancelled=!0,n.cancel(),o=rt.func(e.return)?e.return(Ht):{done:!0,value:Ht}):o=t===Vt?rt.func(e.return)?e.return():{done:!0}:e.next(t),o.done?(M.isMainRunning=!1,M.cont&&M.cont(o.value)):f(o.value,A,"",n)}catch(e){M.isCancelled&&C("error","uncaught at "+j,e.message),M.isMainRunning=!1,M.cont(e,!0)}}function i(t,r){e._isRunning=!1,P.close(),r?(t instanceof Error&&(t.sagaStack="at "+j+" \n "+(t.sagaStack||t.stack)),L.cont||(C("error","uncaught",t.sagaStack||t.stack),t instanceof Error&&R&&R(t)),e._error=t,e._isAborted=!0,e._deferredEnd&&e._deferredEnd.reject(t)):(e._result=t,e._deferredEnd&&e._deferredEnd.resolve(t)),L.cont&&L.cont(t,r),L.joiners.forEach(function(e){return e.cb(t,r)}),L.joiners=null}function f(e,t){function r(e,t){u||(u=!0,a.cancel=Xe,k&&(t?k.effectRejected(i,e):k.effectResolved(i,e)),a(e,t))}var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments[3],i=at();k&&k.effectTriggered({effectId:i,parentEffectId:t,label:n,effect:e});var u=void 0;r.cancel=Xe,a.cancel=function(){if(!u){u=!0;try{r.cancel()}catch(e){C("error","uncaught at "+j,e.message)}r.cancel=Xe,k&&k.effectCancelled(i)}};var c=void 0;return rt.promise(e)?l(e,r):rt.helper(e)?m($t(e),i,r):rt.iterator(e)?h(e,i,j,r):rt.array(e)?T(e,i,r):(c=Bt.take(e))?function(e,t){var r=e.channel,n=e.pattern,o=e.maybe;r=r||P;var a=function(e){return e instanceof Error?t(e,!0):t(jt(e)&&!o?Vt:e)};try{r.take(a,O(n))}catch(e){return t(e,!0)}t.cancel=a.cancel}(c,r):(c=Bt.put(e))?function(e,t){var r=e.channel,n=e.action,o=e.resolve;p(function(){var e=void 0;try{e=(r?r.put:x)(n)}catch(e){if(r||o)return t(e,!0);C("error","uncaught at "+j,e.stack||e.message||e)}if(!o||!rt.promise(e))return t(e);l(e,t)})}(c,r):(c=Bt.all(e))?y(c,i,r):(c=Bt.race(e))?function(e,t,r){var n=void 0,o=Object.keys(e),a={};o.forEach(function(e){var t=function(t,o){if(!n)if(o)r.cancel(),r(t,!0);else if(!jt(t)&&t!==Vt&&t!==Ht){var a;r.cancel(),n=!0,r((a={},a[e]=t,a))}};t.cancel=Xe,a[e]=t}),r.cancel=function(){n||(n=!0,o.forEach(function(e){return a[e].cancel()}))},o.forEach(function(r){n||f(e[r],t,r,a[r])})}(c,i,r):(c=Bt.call(e))?function(e,t,r){var n=e.context,o=e.fn,a=e.args,i=void 0;try{i=o.apply(n,a)}catch(e){return r(e,!0)}return rt.promise(i)?l(i,r):rt.iterator(i)?h(i,t,o.name,r):r(i)}(c,i,r):(c=Bt.cps(e))?function(e,t){var r=e.context,n=e.fn,o=e.args;try{var a=function(e,r){return rt.undef(e)?t(r):t(e,!0)};n.apply(r,o.concat(a)),a.cancel&&(t.cancel=function(){return a.cancel()})}catch(e){return t(e,!0)}}(c,r):(c=Bt.fork(e))?m(c,i,r):(c=Bt.join(e))?function(e,t){if(e.isRunning()){var r={task:L,cb:t};t.cancel=function(){return o(e.joiners,r)},e.joiners.push(r)}else e.isAborted()?t(e.error(),!0):t(e.result())}(c,r):(c=Bt.cancel(e))?function(e,t){e===Ze&&(e=L);e.isRunning()&&e.cancel();t()}(c,r):(c=Bt.select(e))?function(e,t){var r=e.selector,n=e.args;try{var o=r.apply(void 0,[_()].concat(n));t(o)}catch(e){t(e,!0)}}(c,r):(c=Bt.actionChannel(e))?function(e,t){var r=e.pattern,n=e.buffer,o=O(r);o.pattern=r,t(v(b,n||bt.fixed(),o))}(c,r):(c=Bt.flush(e))?function(e,t){e.flush(t)}(c,r):(c=Bt.cancelled(e))?function(e,t){t(!!M.isCancelled)}(0,r):(c=Bt.getContext(e))?function(e,t){t(N[e])}(c,r):(c=Bt.setContext(e))?function(e,t){nt.assign(N,e),t()}(c,r):r(e)}function l(e,t){var r=e[Ye];rt.func(r)?t.cancel=r:rt.func(e.abort)&&(t.cancel=function(){return e.abort()}),e.then(t,function(e){return t(e,!0)})}function h(e,t,r,n){S(e,b,x,_,N,w,t,r,n)}function m(e,t,r){var n=e.fn,o=e.detached,a=function(e){var t=e.context,r=e.fn,n=e.args;if(rt.iterator(r))return r;var o=void 0,a=void 0;try{o=r.apply(t,n)}catch(e){a=e}return rt.iterator(o)?o:u(a?function(){throw a}:function(){var e=void 0,t={done:!1,value:o};return function(r){return e?{done:!0,value:r}:(e=!0,t)}}())}({context:e.context,fn:n,args:e.args});try{d();var i=S(a,b,x,_,N,w,t,n.name,o?null:Xe);o?r(i):a._isRunning?(D.addTask(i),r(i)):a._error?D.abort(a._error):r(i)}finally{g()}}function y(e,t,r){var n=Object.keys(e);if(!n.length)return r(rt.array(e)?[]:{});var o=0,a=void 0,i={},u={};n.forEach(function(t){var c=function(u,c){a||(c||jt(u)||u===Vt||u===Ht?(r.cancel(),r(u,c)):(i[t]=u,++o===n.length&&(a=!0,r(rt.array(e)?ot.from(qt({},i,{length:n.length})):i))))};c.cancel=Xe,u[t]=c}),r.cancel=function(){a||(a=!0,n.forEach(function(e){return u[e].cancel()}))},n.forEach(function(r){return f(e[r],t,r,u[r])})}var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return Xe},x=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xe,_=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Xe,I=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},w=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},A=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,j=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"anonymous",E=arguments[8];r(e,rt.iterator,Gt);var T=s(y,ct("[...effects]","all([...effects])")),k=w.sagaMonitor,R=w.onError,C=w.logger||c,P=function(e){var t=v(function(t){return e(function(e){e[Qe]?t(e):p(function(){return t(e)})})});return It({},t,{take:function(e,n){arguments.length>1&&(r(n,rt.func,"channel.take's matcher argument must be a function"),e[$e]=n),t.take(e)}})}(b),N=Object.create(I);n.cancel=Xe;var L=function(e,n,o,i){var u,c;return o._deferredEnd=null,u={},u[He]=!0,u.id=e,u.name=n,c={},c.done=c.done||{},c.done.get=function(){if(o._deferredEnd)return o._deferredEnd.promise;var e=a();return o._deferredEnd=e,o._isRunning||(o._error?e.reject(o._error):e.resolve(o._result)),e.promise},u.cont=i,u.joiners=[],u.cancel=t,u.isRunning=function(){return o._isRunning},u.isCancelled=function(){return o._isCancelled},u.isAborted=function(){return o._isAborted},u.result=function(){return o._result},u.error=function(){return o._error},u.setContext=function(e){r(e,rt.object,ft("task",e)),nt.assign(N,e)},function(e,t){for(var r in t){var n=t[r];n.configurable=n.enumerable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,r,n)}}(u,c),u}(A,j,e,E),M={name:j,cancel:function(){M.isRunning&&!M.isCancelled&&(M.isCancelled=!0,n(Ht))},isRunning:!0},D=function(e,t,r){function n(e){i(),r(e,!0)}function a(e){u.push(e),e.cont=function(a,i){s||(o(u,e),e.cont=Xe,i?n(a):(e===t&&(c=a),u.length||(s=!0,r(c))))}}function i(){s||(s=!0,u.forEach(function(e){e.cont=Xe,e.cancel()}),u=[])}var u=[],c=void 0,s=!1;return a(t),{addTask:a,cancelAll:i,abort:n,getTasks:function(){return u},taskNames:function(){return u.map(function(e){return e.name})}}}(0,M,i);return E&&(E.cancel=t),e._isRunning=!0,n(),L}function R(e){return null==e?void 0===e?or:nr:ar&&ar in Object(e)?function(e){var t=Xt.call(e,tr),r=e[tr];try{e[tr]=void 0;var n=!0}catch(e){}var o=er.call(e);return n&&(t?e[tr]=r:delete e[tr]),o}(e):function(e){return rr.call(e)}(e)}function C(e,t,r){function n(){l===f&&(l=f.slice())}function o(){return s}function a(e){if("function"!=typeof e)throw Error("Expected listener to be a function.");var t=!0;return n(),l.push(e),function(){if(t){t=!1,n();var r=l.indexOf(e);l.splice(r,1)}}}function i(e){if(!function(e){if(null==e||"object"!=typeof e||R(e)!=ur)return!1;var t=ir(e);if(null===t)return!0;var r=sr.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&cr.call(r)==fr}(e))throw Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(p)throw Error("Reducers may not dispatch actions.");try{p=!0,s=c(s,e)}finally{p=!1}for(var t=f=l,r=0;t.length>r;r++){(0,t[r])()}return e}var u;if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw Error("Expected the enhancer to be a function.");return r(C)(e,t)}if("function"!=typeof e)throw Error("Expected the reducer to be a function.");var c=e,s=t,f=[],l=f,p=!1;return i({type:pr.INIT}),u={dispatch:i,subscribe:a,getState:o,replaceReducer:function(e){if("function"!=typeof e)throw Error("Expected the nextReducer to be a function.");c=e,i({type:pr.INIT})}},u[lr]=function(){var e,t=a;return e={subscribe:function(e){function r(){e.next&&e.next(o())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");return r(),{unsubscribe:t(r)}}},e[lr]=function(){return this},e},u}function P(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function N(e,t){return 2==t?function(t,r){return e(t,r)}:function(t){return e(t)}}function L(e){for(var t=e?e.length:0,r=Array(t);t--;)r[t]=e[t];return r}function M(e,t){return function(){var r=arguments.length;if(r){for(var n=Array(r);r--;)n[r]=arguments[r];var o=n[0]=t.apply(void 0,n);return e.apply(void 0,n),o}}}function D(e,t,r,n){function o(e,t){if(h.cap){var r=hr.iterateeRearg[e];if(r)return function(e,t){return s(e,function(e){var r=t.length;return function(e,t){return 2==t?function(t,r){return e.apply(void 0,arguments)}:function(t){return e.apply(void 0,arguments)}}(O(N(e,r),t),r)})}(t,r);var n=!p&&hr.iterateeAry[e];if(n)return function(e,t){return s(e,function(e){return"function"==typeof e?N(e,t):e})}(t,n)}return t}function a(e,t,r){if(h.fixed&&(v||!hr.skipFixed[e])){var n=hr.methodSpread[e],o=n&&n.start;return void 0===o?_(t,r):function(e,t){return function(){for(var r=arguments.length,n=r-1,o=Array(r);r--;)o[r]=arguments[r];var a=o[t],i=o.slice(0,t);return a&&vr.apply(i,a),t!=n&&vr.apply(i,o.slice(t+1)),e.apply(this,i)}}(t,o)}return t}function i(e,t,r){return h.rearg&&r>1&&(m||!hr.skipRearg[e])?O(t,hr.methodRearg[e]||hr.aryRearg[r]):t}function u(e,t){for(var r=-1,n=(t=R(t)).length,o=n-1,a=w(Object(e)),i=a;null!=i&&++r<n;){var u=t[r],c=i[u];null!=c&&(i[t[r]]=w(r==o?c:Object(c))),i=i[u]}return a}function c(e,t){var r=hr.aliasToReal[e]||e,o=hr.remap[r]||r,a=n;return function(e){var n=p?b:x,i=p?b[o]:t,u=I(I({},a),e);return D(n,r,i,u)}}function s(e,t){return function(){var r=arguments.length;if(!r)return e();for(var n=Array(r);r--;)n[r]=arguments[r];var o=h.rearg?0:r-1;return n[o]=t(n[o]),e.apply(void 0,n)}}function f(e,t){var r,n=hr.aliasToReal[e]||e,s=t,f=P[n];return f?s=f(t):h.immutable&&(hr.mutate.array[n]?s=M(t,L):hr.mutate.object[n]?s=M(t,function(e){return function(t){return e({},t)}}(t)):hr.mutate.set[n]&&(s=M(t,u))),j(C,function(e){return j(hr.aryMethod[e],function(t){if(n==t){var u=hr.methodSpread[n];return r=u&&u.afterRearg?a(n,i(n,s,e),e):i(n,a(n,s,e),e),r=o(n,r),r=function(e,t,r){return g||h.curry&&r>1?A(t,r):t}(0,r,e),!1}}),!r}),r||(r=s),r==t&&(r=g?A(r,1):function(){return t.apply(this,arguments)}),r.convert=c(n,t),hr.placeholder[n]&&(l=!0,r.placeholder=t.placeholder=y),r}var l,p="function"==typeof t,d=t===Object(t);if(d&&(n=r,r=t,t=void 0),null==r)throw new TypeError;n||(n={});var h={cap:!("cap"in n)||n.cap,curry:!("curry"in n)||n.curry,fixed:!("fixed"in n)||n.fixed,immutable:!("immutable"in n)||n.immutable,rearg:!("rearg"in n)||n.rearg},g="curry"in n&&n.curry,v="fixed"in n&&n.fixed,m="rearg"in n&&n.rearg,y=p?r:gr,b=p?r.runInContext():void 0,x=p?r:{ary:e.ary,assign:e.assign,clone:e.clone,curry:e.curry,forEach:e.forEach,isArray:e.isArray,isFunction:e.isFunction,iteratee:e.iteratee,keys:e.keys,rearg:e.rearg,toInteger:e.toInteger,toPath:e.toPath},_=x.ary,I=x.assign,w=x.clone,A=x.curry,j=x.forEach,E=x.isArray,T=x.isFunction,k=x.keys,O=x.rearg,S=x.toInteger,R=x.toPath,C=k(hr.aryMethod),P={castArray:function(e){return function(){var t=arguments[0];return E(t)?e(L(t)):e.apply(void 0,arguments)}},iteratee:function(e){return function(){var t=arguments[1],r=e(arguments[0],t),n=r.length;return h.cap&&"number"==typeof t?(t=t>2?t-2:1,n&&t>=n?r:N(r,t)):r}},mixin:function(e){return function(t){var r=this;if(!T(r))return e(r,Object(t));var n=[];return j(k(t),function(e){T(t[e])&&n.push([e,r.prototype[e]])}),e(r,Object(t)),j(n,function(e){var t=e[1];T(t)?r.prototype[e[0]]=t:delete r.prototype[e[0]]}),r}},nthArg:function(e){return function(t){var r=0>t?1:S(t)+1;return A(e(t),r)}},rearg:function(e){return function(t,r){var n=r?r.length:0;return A(e(t,r),n)}},runInContext:function(t){return function(r){return D(e,t(r),n)}}};if(!d)return f(t,r);var U=r,W=[];return j(C,function(e){j(hr.aryMethod[e],function(e){var t=U[hr.remap[e]||e];t&&W.push([e,f(e,t)])})}),j(k(U),function(e){var t=U[e];if("function"==typeof t){for(var r=W.length;r--;)if(W[r][0]==e)return;t.convert=c(e,t),W.push([e,t])}}),j(W,function(e){U[e[0]]=e[1]}),U.convert=function(e){return U.runInContext.convert(e)(void 0)},l&&(U.placeholder=y),j(k(U),function(e){j(hr.realToAlias[e]||[],function(t){U[t]=U[e]})}),U}function U(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=pn,this.__views__=[]}function W(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function F(e){if(xn(e)&&!bn(e)&&!(e instanceof dn)){if(e instanceof yn)return e;if(wn.call(e,"__wrapped__"))return In(e)}return new yn(e)}function B(e,t,r,n,o,a,i,u,c,s){function f(){for(var m=arguments.length,y=Array(m),b=m;b--;)y[b]=arguments[b];if(h)var x=to(f),_=fn(y,x);if(n&&(y=un(y,n,o,h)),a&&(y=sn(y,a,i,h)),m-=_,h&&s>m){var I=co(y,x);return eo(e,t,B,f.placeholder,r,y,I,u,c,s-m)}var w=p?r:this,A=d?w[e]:e;return m=y.length,u?y=io(y,u):g&&m>1&&y.reverse(),l&&m>c&&(y.length=c),this&&this!==_r&&this instanceof f&&(A=v||tn(A)),A.apply(w,y)}var l=t&ho,p=t&so,d=t&fo,h=t&(lo|po),g=t&go,v=d?void 0:tn(e);return f}function q(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function z(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function G(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function V(e){var t=this.__data__=new Ua(e);this.size=t.size}function H(e,t,r,n,o,a){var i,u=t&Ou,c=t&Su,s=t&Ru;if(r&&(i=o?r(e,n,o,a):r(e)),void 0!==i)return i;if(!Nr(e))return e;var f=bn(e);if(f){if(i=zi(e),!u)return _n(e,i)}else{var l=Bi(e),p=l==Pu||l==Nu;if(pa(e))return gi(e,u);if(l==Lu||l==Cu||p&&!o){if(i=c||p?{}:ku(e),!u)return c?ji(e,hi(i,e)):_i(e,Ra(i,e))}else{if(!Mu[l])return o?e:{};i=Tu(e,l,H,u)}}a||(a=new si);var d=a.get(e);if(d)return d;a.set(e,i);var h=s?c?ki:Ti:c?keysIn:Sa,g=f?void 0:h(e);return Wn(g||e,function(n,o){g&&(n=e[o=n]),ra(i,o,H(n,t,r,o,e,a))}),i}function K(e,t,r){var n=Qo(e,Fu,void 0,void 0,void 0,void 0,void 0,t=r?void 0:t);return n.placeholder=K.placeholder,n}function $(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new ii;++t<r;)this.add(e[t])}function Y(e,t,r,n,o){return e===t||(null==e||null==t||!xn(e)&&!xn(t)?e!=e&&t!=t:xc(e,t,r,n,Y,o))}function Q(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Cc);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var i=e.apply(this,n);return r.cache=a.set(o,i)||a,i};return r.cache=new(Q.Cache||ii),r}function Z(e){if("string"==typeof e)return e;if(bn(e))return Wc(e,Z)+"";if(So(e))return qc?qc.call(e):"";var t=e+"";return"0"==t&&1/e==-Fc?"-0":t}function J(e,t,r,n,o){var a=-1,i=e.length;for(r||(r=ss),o||(o=[]);++a<i;){var u=e[a];t>0&&r(u)?t>1?J(u,t-1,r,n,o):Ii(o,u):n||(o[o.length]=u)}return o}function X(e,t,r,n,o){e!==t&&Cs(t,function(a,i){if(Nr(a))o||(o=new si),yf(e,t,i,r,X,n,o);else{var u=n?n(e[i],a,i+"",e,t,o):void 0;void 0===u&&(u=a),gf(e,i,u)}},di)}function ee(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;t>n;n++)r[n-1]=arguments[n];var o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.apply(void 0,[e].concat(r));case 2:if(void 0===(o=t.sent)){t.next=5;break}return t.abrupt("return",o);case 5:return t.next=7,y("*");case 7:t.next=0;break;case 8:case"end":return t.stop()}},Vf,this)}function te(){var e,t,r,n,o,a,i;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,E(Tf.getPropertyLicense);case 2:return e=u.sent,u.next=5,E(Tf.getPropertyGroup);case 5:return t=u.sent,u.next=8,E(kf);case 8:return r=u.sent,u.next=11,E(Tf.getPropertyStaticConfigVersion);case 11:return n=u.sent,u.next=14,I(ep,n,{environment:r,license:e,group:t});case 14:return o=u.sent,a=Rs("order"),i=Jf("order",o.offline_form.fields).map(a),u.next=19,b(Ys.setPropertyTicketForm(i));case 19:case"end":return u.stop()}},Yl,this)}function re(e){var t,r,n;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,E(Sf);case 2:return t=o.sent,o.next=5,E(Tf.getPropertyVisitorId);case 5:return r=o.sent,n=Ks({},t),o.next=9,b(Ys.setPropertyStaticConfigVersion(e.static_config_version));case 9:if(e.visitor.nick&&(n.name=e.visitor.nick),e.visitor.params&&(n.customProperties=Ks({},n.customParams,Jl(e.visitor.params))),!e.visitor.nick&&!e.visitor.params){o.next=14;break}return o.next=14,b(uf({visitorData:n}));case 14:if(r){o.next=18;break}return o.next=17,b(Ys.setPropertyVisitorId(e.visitor.session));case 17:Ul.setItem("visitorId",e.visitor.session);case 18:case"end":return o.stop()}},Ql,this)}function ne(){var e,t,r,n;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,E(Tf.getPropertyLicense);case 2:return e=o.sent,o.next=5,E(Tf.getPropertyGroup);case 5:return t=o.sent,o.next=8,E(kf);case 8:return r=o.sent,o.next=11,I(Xl,{environment:r,license:e,group:t});case 11:return n=o.sent,o.next=14,I(re,n);case 14:case"end":return o.stop()}},Zl,this)}function oe(e){var t,r,n,o,a,i,u,c,s,f=e.sendFullPing;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(ee,Tf.getPropertyVisitorId);case 2:return t=e.sent,e.next=5,E(Tf.getPropertyLicense);case 5:return r=e.sent,e.next=8,E(Tf.getPropertyGroup);case 8:return n=e.sent,e.next=11,E(Sf);case 11:return o=e.sent,e.next=14,E(kf);case 14:return a=e.sent,i=ap(f,t,n,o),e.prev=16,e.next=19,I(Kl,"ping",{license:r,environment:a,body:i},{retry:10});case 19:return u=e.sent,e.next=22,E(Tf.getPropertyConnectionStatus);case 22:if("connected"===(c=e.sent)){e.next=26;break}return e.next=26,b(Ys.setPropertyConnectionStatus("connected"));case 26:return e.abrupt("return",u);case 29:return e.prev=29,e.t0=e.catch(16),e.next=33,E(Tf.getPropertyConnectionStatus);case 33:if("disconnected"===(s=e.sent)){e.next=37;break}return e.next=37,b(Ys.setPropertyConnectionStatus("disconnected"));case 37:return e.abrupt("return",{error:!0});case 38:case"end":return e.stop()}},tp,this,[[16,29]])}function ae(){var e,t,r,n;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,T(uf.getActionName(),bt.expanding());case 2:e=o.sent;case 3:return o.next=6,y(e);case 6:return t=o.sent,o.next=9,I(oe,{sendFullPing:!0});case 9:if(!(r=o.sent).error){o.next=14;break}return o.next=13,b(tf({error:r.error,requestId:t.payload.requestId}));case 13:return o.abrupt("return",o.sent);case 14:return o.next=16,E(Sf);case 16:return n=o.sent,o.next=19,b(ef({visitorData:n,requestId:t.payload.requestId}));case 19:o.next=3;break;case 21:case"end":return o.stop()}},rp,this)}function ie(){var e,t,r,n;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e=3,t=!0;case 2:return o.next=5,I(oe,{sendFullPing:t});case 5:return r=o.sent,n=t,t=!!r.next_ping_send_full_details,e=!n&&t?0:r.next_ping_delay||3,o.next=11,I(i,1e3*e);case 11:o.next=2;break;case 13:case"end":return o.stop()}},np,this)}function ue(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(ie);case 2:return e.next=4,w(ae);case 4:case"end":return e.stop()}},op,this)}function ce(){var e,t,r,n,o,a,u,c,s,f;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=3,E(Tf.getPropertyLicense);case 3:return e=l.sent,l.next=6,E(Tf.getPropertyGroup);case 6:return t=l.sent,l.next=9,I(ee,Tf.getPropertyVisitorId);case 9:return r=l.sent,l.next=12,E(kf);case 12:return n=l.sent,o={visitor:{id:r},skill:t,random_id:Math.random()+""},l.prev=14,l.next=17,I(Kl,"status_ping",{license:e,environment:n,body:o},{retry:10});case 17:return a=l.sent,l.next=20,E(Tf.getPropertyChatStatus);case 20:return u=l.sent,c=up(a),l.next=24,E(Tf.getPropertyConnectionStatus);case 24:if("connected"===(s=l.sent)){l.next=28;break}return l.next=28,b(Ys.setPropertyConnectionStatus("connected"));case 28:if(u===c){l.next=31;break}return l.next=31,b(Ys.setPropertyChatStatus(c));case 31:l.next=41;break;case 33:return l.prev=33,l.t0=l.catch(14),l.next=37,E(Tf.getPropertyConnectionStatus);case 37:if("disconnected"===(f=l.sent)){l.next=41;break}return l.next=41,b(Ys.setPropertyConnectionStatus("disconnected"));case 41:return l.next=43,I(i,3e3);case 43:l.next=0;break;case 45:case"end":return l.stop()}},ip,this,[[14,33]])}function se(e){var t,r,n,o,a,i,u,c=e.customId,s=e.text;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(Tf.getPropertyLicense);case 2:return t=e.sent,e.next=5,I(ee,Tf.getPropertyVisitorId);case 5:return r=e.sent,e.next=8,E(Tf.getPropertySecuredToken);case 8:return n=e.sent,e.next=11,E(Tf.getPropertySecretId);case 11:return o=e.sent,e.next=14,E(kf);case 14:return a=e.sent,i={environment:a,license:t,securedToken:n,secretId:o,body:{author:"visitor",message:s,message_id:c,random_id:c,visitor:{id:r}}},e.next=18,I(Kl,"send_message",i);case 18:u=e.sent;case 19:case"end":return e.stop()}},cp,this)}function fe(e){var t,r,n,o,a,i,u,c,s=e.customId,f=e.text;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(Tf.getPropertyLicense);case 2:return t=e.sent,e.next=5,E(Tf.getPropertyGroup);case 5:return r=e.sent,e.next=8,I(ee,Tf.getPropertyVisitorId);case 8:return n=e.sent,e.next=11,E(Sf);case 11:return o=e.sent,e.next=14,E(kf);case 14:return a=e.sent,i={group:r,source_group:r,details:"",details_labels:"",from_manual_invitation:!1,integration_params:"",random_id:s,trigger_unique_id:"",version:"Embedded",custom_variables:{},welcome_message:"",is_mobile:!1,return_secured_session_id:!0,visitor:{id:n,nick:o.name||"Client",email:o.email||""}},f&&(i.visitor_message=f,i.visitor_message_id=s),o.customProperties&&(i.custom_variables=o.customProperties),u={license:t,environment:a,body:i},e.next=21,I(Kl,"start_chat",u);case 21:if(!(c=e.sent).secured_session_id){e.next=26;break}return e.next=25,b(Ys.setPropertySecretId(c.secured_session_id));case 25:Ul.setItem("secretId",c.secured_session_id);case 26:if(!c.secured_token){e.next=32;break}return e.next=29,b(Ys.setPropertySecuredToken(c.secured_token));case 29:return e.next=31,b(Ys.setPropertyChatState(sp));case 31:Ul.setItem("securedToken",c.secured_token);case 32:case"end":return e.stop()}},lp,this)}function le(){var e,t,r,n,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E(Tf.getPropertyLicense);case 2:return e=a.sent,a.next=5,I(ee,Tf.getPropertyVisitorId);case 5:return t=a.sent,a.next=8,E(Tf.getPropertySecuredToken);case 8:return r=a.sent,a.next=11,E(kf);case 11:return n=a.sent,o={environment:n,license:e,securedToken:r,body:{source:"visitor",random_id:Math.random()+"",visitor:{id:t}}},a.next=15,I(Kl,"close_chat",o);case 15:return a.abrupt("return",a.sent);case 16:case"end":return a.stop()}},pp,this)}function pe(e){var t,r,n,o,a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,I(ee,Tf.getPropertyChatState);case 2:if(t=i.sent,r=e.payload,n=r.customId,o=r.text,i.prev=4,t===sp){i.next=10;break}return i.next=8,I(fe,{customId:n,text:o});case 8:i.next=12;break;case 10:return i.next=12,I(se,{customId:n,text:o});case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(4),e.payload.promise.reject({type:"connection",reason:"Request failed"});case 17:return i.next=19,y(function(e){return e.type===Zs.getActionName()&&hp("payload.customId",e)===n});case 19:e.payload.promise.resolve({id:(a=i.sent).payload.id,timestamp:a.payload.timestamp});case 21:case"end":return i.stop()}},Bp,this,[[4,14]])}function de(e){var t,r,n,o,a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,E(Sf);case 2:return t=i.sent,r=wp(vp,kp(["name","email","pageUrl","pageTitle","customProperties"],e.payload)),n=Math.random()+"",o=jp(t,r),i.next=8,b(uf({requestId:n,visitorData:o}));case 8:return i.next=10,y(function(e){return(e.type===ef.getActionName()||e.type===tf.getActionName())&&e.payload.requestId===n});case 10:if((a=i.sent).type!==ef.getActionName()){i.next=13;break}return i.abrupt("return",e.payload.promise.resolve(a.payload.visitorData));case 13:return i.abrupt("return",e.payload.promise.reject({type:"connection",reason:"Request failed"}));case 14:case"end":return i.stop()}},qp,this)}function he(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b(Ys.setPropertySneakPeek(e.payload.text));case 2:e.payload.promise.resolve({success:!0});case 3:case"end":return t.stop()}},zp,this)}function ge(e){var t,r,n,o,a,i,u;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,E(Tf.getPropertyLicense);case 2:return t=c.sent,c.next=5,E(kf);case 5:return r=c.sent,c.next=8,I(ee,Tf.getPropertyVisitorId);case 8:return n=c.sent,c.next=11,E(Tf.getPropertyChatId);case 11:return o=c.sent,c.next=14,E(Tf.getPropertySecuredToken);case 14:return a=c.sent,c.next=17,E(Tf.getPropertySecretId);case 17:if(i=c.sent,o){c.next=21;break}return e.payload.promise.reject({type:"state",reason:"There is no chat to forward transcript"}),c.abrupt("return");case 21:return u=Fp("forwardChatTranscript",{visitorId:n,chatId:o,email:e.payload.email}),c.prev=22,c.next=25,I($l,r,t,u,a,i);case 25:c.next=31;break;case 27:return c.prev=27,c.t0=c.catch(22),e.payload.promise.reject({type:"connection",reason:"Request failed"}),c.abrupt("return");case 31:e.payload.promise.resolve({success:!0});case 32:case"end":return c.stop()}},Gp,this,[[22,27]])}function ve(e){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,E(Tf.getPropertyChatId);case 2:if(t=r.sent){r.next=6;break}return e.payload.promise.reject({type:"state",reason:"There is no chat to close"}),r.abrupt("return");case 6:return r.prev=6,r.next=9,I(le);case 9:r.next=15;break;case 11:return r.prev=11,r.t0=r.catch(6),e.payload.promise.reject({type:"connection",reason:"Request failed"}),r.abrupt("return");case 15:return r.next=17,y(Js.getActionName());case 17:e.payload.promise.resolve({success:!0});case 18:case"end":return r.stop()}},Vp,this,[[6,11]])}function me(e){var t,r,n,o,a,i;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,E(Tf.getPropertyLicense);case 2:return t=u.sent,u.next=5,E(kf);case 5:return r=u.sent,u.next=8,I(ee,Tf.getPropertyVisitorId);case 8:return n=u.sent,u.next=11,E(Tf.getPropertyChatId);case 11:return o=u.sent,u.next=14,E(Tf.getPropertySecuredToken);case 14:if(a=u.sent,o){u.next=18;break}return e.payload.promise.reject({type:"state",reason:"There is no chat to rate"}),u.abrupt("return");case 18:return i=Fp("rateChat",{visitorId:n,chatId:o,rate:e.payload.rate}),u.prev=19,u.next=22,I($l,r,t,i,a);case 22:u.next=28;break;case 24:return u.prev=24,u.t0=u.catch(19),e.payload.promise.reject({type:"connection",reason:"Request failed"}),u.abrupt("return");case 28:return u.next=30,y(af.getActionName());case 30:if(!e.payload.comment){u.next=40;break}return u.prev=31,u.next=34,I(Kl,"send_rating_comment",{environment:r,license:t,securedToken:a,body:{comment:e.payload.comment,conference_id:o,random_id:Math.random()+"",visitor:{id:n}}});case 34:u.next=40;break;case 36:return u.prev=36,u.t1=u.catch(31),e.payload.promise.reject({type:"connection",reason:"Rate Comment request failed"}),u.abrupt("return");case 40:e.payload.promise.resolve({success:!0});case 41:case"end":return u.stop()}},Hp,this,[[19,24],[31,36]])}function ye(e){var t,r=e.payload;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(Tf.getPropertyChatState);case 2:if((t=e.sent)!==sp){e.next=6;break}return r.promise.reject({type:"state",reason:"You can't disconnect during the chat"}),e.abrupt("return");case 6:r.promise.resolve({success:!0});case 7:case"end":return e.stop()}},Kp,this)}function be(e){var t,r=e.payload;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(Tf.getPropertyTicketForm);case 2:if(t=e.sent){e.next=15;break}return e.prev=4,e.next=7,I(te);case 7:return e.next=9,E(Tf.getPropertyTicketForm);case 9:t=e.sent,e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(4),e.abrupt("return",r.promise.reject({type:"connection",reason:"Request failed"}));case 15:return e.abrupt("return",r.promise.resolve({fields:t}));case 16:case"end":return e.stop()}},$p,this,[[4,12]])}function xe(e){var t,r=e.payload;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(ee,Tf.getPropertyVisitorId);case 2:return e.next=4,E(Sf);case 4:return t=e.sent,e.abrupt("return",r.promise.resolve(t));case 6:case"end":return e.stop()}},Yp,this)}function _e(e){var t,r,n,o,a,i,u=e.payload;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(kf);case 2:return t=e.sent,e.next=5,E(Tf.getPropertyLicense);case 5:return r=e.sent,e.next=8,I(ee,Tf.getPropertyVisitorId);case 8:return n=e.sent,e.next=11,E(Tf.getPropertyGroup);case 11:return o=e.sent,e.next=14,E(Sf);case 14:return a=e.sent,i={group:o,licence_id:r,ticket_message:u.message,offline_message:u.message,requester:{mail:u.email,name:u.name},subject:u.subject,visitor_id:n},a.pageUrl&&(i.source={url:a.pageUrl}),e.prev=17,e.next=20,I(Hl,"v2/tickets/new",{environment:t,license:r,body:i});case 20:u.promise.resolve({success:!0}),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(17),u.promise.reject({type:"connection",reason:"Request failed"});case 26:case"end":return e.stop()}},Qp,this,[[17,23]])}function Ie(){var e,t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,k(Xp.getActionName(),de);case 2:return r.next=4,k(id.getActionName(),be);case 4:return r.next=6,k(ud.getActionName(),_e);case 6:return r.next=8,k(td.getActionName(),me);case 8:return r.next=10,k(rd.getActionName(),he);case 10:return r.next=12,k(od.getActionName(),ve);case 12:return r.next=14,k(nd.getActionName(),ge);case 14:return r.next=16,k(ad.getActionName(),ye);case 16:return r.next=18,k(ed.getActionName(),xe);case 18:return r.next=20,T(Jp.getActionName(),bt.expanding());case 20:e=r.sent;case 21:return r.next=24,y(e);case 24:return t=r.sent,r.next=27,I(pe,t);case 27:r.next=21;break;case 29:case"end":return r.stop()}},Zp,this)}function we(e){var t,r=e.emitter;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(ee,Tf.getPropertyChatId);case 2:return t=e.sent,r.emit(cd,{chatId:t}),e.next=6,y(Js.getActionName());case 6:r.emit(fd);case 7:case"end":return e.stop()}},yd,this)}function Ae(e,t){e.emitter.emit(pd,{status:t.payload.data.toLowerCase()})}function je(e,t){e.emitter.emit(dd,{status:t.payload.data.toLowerCase()})}function Ee(e,t){var r,n,o,a=e.emitter,i=t.payload;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(ee,Tf.getPropertyChatId);case 2:return r=e.sent,e.next=5,E(Tf.getPropertyVisitorId);case 5:n=e.sent,o={id:i.id,timestamp:i.timestamp,authorId:"visitor"===i.authorType?n:i.authorId,text:i.text,chatId:r},void 0!==i.isMobile&&(o.isMobile=i.isMobile),void 0!==i.customId&&(o.customId=i.customId),a.emit(sd,o);case 10:case"end":return e.stop()}},bd,this)}function Te(e,t){var r,n,o=e.emitter,a=t.payload;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(Tf.getPropertyVisitorId);case 2:r=e.sent,o.emit(hd,n={id:a.id,timestamp:a.timestamp,authorId:"visitor"===a.authorType?r:a.authorId,url:a.url,contentType:a.contentType,size:a.size});case 5:case"end":return e.stop()}},xd,this)}function ke(e,t){var r=e.emitter,n=t.payload,o={name:n.name,id:n.id};n.avatarUrl&&(o.avatarUrl=n.avatarUrl),n.jobTitle&&(o.jobTitle=n.jobTitle),r.emit(ld,o)}function Oe(e,t){var r=t.payload;e.emitter.emit(gd,{numberInQueue:r.numberInQueue,waitingTime:r.waitingTime})}function Se(e,t){var r=t.payload;e.emitter.emit(vd,{authorId:r.authorId,isTyping:r.isTyping})}function Re(e){var t,r=e.emitter;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(ee,Tf.getPropertyVisitorId);case 2:t=e.sent,Promise.resolve({}).then(function(){r.emit(md,{id:t})});case 4:case"end":return e.stop()}},_d,this)}function Ce(e){var t=e.emitter;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(Re,{emitter:t});case 2:return e.next=4,k(Qs.getActionName(),we,{emitter:t});case 4:return e.next=6,k(Ys.setPropertyChatStatus.getActionName(),Ae,{emitter:t});case 6:return e.next=8,k(Ys.setPropertyConnectionStatus.getActionName(),je,{emitter:t});case 8:return e.next=10,k(Zs.getActionName(),Ee,{emitter:t});case 10:return e.next=12,k(rf.getActionName(),Te,{emitter:t});case 12:return e.next=14,k(Xs.getActionName(),ke,{emitter:t});case 14:return e.next=16,k(nf.getActionName(),Oe,{emitter:t});case 16:return e.next=18,k(of.getActionName(),Se,{emitter:t});case 18:case"end":return e.stop()}},Id,this)}function Pe(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(Ys.setPropertyChatState(fp));case 2:return e.next=4,b(Ys.removePropertySecuredToken());case 4:Ul.removeItem("securedToken");case 5:case"end":return e.stop()}},uh,this)}function Ne(){var e,t,r,n,o,a,i,u,c;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,E(Tf.getPropertyLicense);case 2:return e=s.sent,s.next=5,E(Tf.getPropertyGroup);case 5:return t=s.sent,s.next=8,I(ee,Tf.getPropertyVisitorId);case 8:return r=s.sent,s.next=11,E(Tf.getPropertySecuredToken);case 11:return n=s.sent,s.next=14,E(Tf.getPropertySecretId);case 14:return o=s.sent,s.next=17,E(kf);case 17:if(a=s.sent,!n){s.next=43;break}return i={random_id:Math.random()+"",visitor:{id:r,group:t}},s.prev=20,s.next=23,I(Kl,"get_pending_messages",{environment:a,license:e,securedToken:n,secretId:o,body:i});case 23:if(!(u=s.sent).messages){s.next=29;break}return s.next=27,b(Ys.setPropertyChatState(sp));case 27:s.next=31;break;case 29:return s.next=31,I(Pe);case 31:s.next=41;break;case 33:return s.prev=33,s.t0=s.catch(20),s.next=37,E(Tf.getPropertyConnectionStatus);case 37:if("disconnected"===(c=s.sent)){s.next=41;break}return s.next=41,b(Ys.setPropertyConnectionStatus("disconnected"));case 41:s.next=45;break;case 43:return s.next=45,b(Ys.setPropertyChatState(fp));case 45:case"end":return s.stop()}},ch,this,[[20,33]])}function Le(){var e,t,r,n,o,a,u,c,s,f,l,p,d,h,g;return regeneratorRuntime.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=3,E(Tf.getPropertyLicense);case 3:return e=v.sent,v.next=6,E(Tf.getPropertyGroup);case 6:return t=v.sent,v.next=9,I(ee,Tf.getPropertyVisitorId);case 9:return r=v.sent,v.next=12,E(Tf.getPropertySecuredToken);case 12:return n=v.sent,v.next=15,E(Tf.getPropertySecretId);case 15:return o=v.sent,v.next=18,E(Tf.getPropertyChatState);case 18:return a=v.sent,v.next=21,E(kf);case 21:return u=v.sent,v.next=24,E(Tf.getPropertySneakPeek);case 24:if(c=v.sent,!n||a!==sp){v.next=64;break}return v.next=28,E(Tf.getPropertyLastMessageId);case 28:return s=v.sent,f={random_id:Math.random()+"",visitor:{id:r,group:t},last_unique_id:null},s&&(f.last_unique_id=s),ph!==c&&(f.sneak_peek=c),v.prev=32,v.next=35,I(Kl,"get_pending_messages",{environment:u,license:e,securedToken:n,secretId:o,body:f});case 35:return l=v.sent,v.next=38,E(Tf.getPropertyConnectionStatus);case 38:if("connected"===(p=v.sent)){v.next=42;break}return v.next=42,b(Ys.setPropertyConnectionStatus("connected"));case 42:if(l.messages){v.next=47;break}return v.next=45,I(Pe);case 45:v.next=54;break;case 47:return d=gh(l),v.next=50,x(d.map(function(e){return b(wd({name:e.name,message:e}))}));case 50:if(!(h=hh(l.messages))){v.next=54;break}return v.next=54,b(Ys.setPropertyLastMessageId(h));case 54:v.next=64;break;case 56:return v.prev=56,v.t0=v.catch(32),v.next=60,E(Tf.getPropertyConnectionStatus);case 60:if("disconnected"===(g=v.sent)){v.next=64;break}return v.next=64,b(Ys.setPropertyConnectionStatus("disconnected"));case 64:return ph=c,v.next=67,I(i,1800);case 67:v.next=0;break;case 69:case"end":return v.stop()}},sh,this,[[32,56]])}function Me(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(ee,Tf.getPropertyChatState);case 2:return e.next=4,I(Le);case 4:return e.next=6,k(Ys.setPropertyChatState.getActionName(),Le);case 6:case"end":return e.stop()}},fh,this)}function De(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(Ne);case 2:return e.next=4,A(Me);case 4:case"end":return e.stop()}},lh,this)}function Ue(e){var t,r,n=e.payload;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(t=n.message).timestamp*=1e3,e.t0=t.name,e.next=e.t0===mh?5:e.t0===vh?11:e.t0===Up.RATE_CHAT?14:e.t0===yh?17:e.t0===Up.NEW_AGENT_MESSAGE?20:e.t0===Up.CHAT_ENDED?23:e.t0===Up.NEW_AGENT?31:e.t0===Up.VISITOR_QUEUED?40:e.t0===Up.TYPING_INDICATOR?43:46;break;case 5:return e.next=7,b(Qs({securedToken:bs(Ul.getItem("securedToken"),"securedToken",n)}));case 7:if(!t.data.visitorMessage){e.next=10;break}return e.next=10,b(Zs({id:t.uniqueId,timestamp:t.timestamp,authorType:"visitor",text:t.data.visitorMessage,customId:t.data.randomId}));case 10:return e.abrupt("break",47);case 11:return e.next=13,b(Zs({id:t.uniqueId,timestamp:t.timestamp,authorType:"visitor",text:t.data.message,customId:t.data.randomId}));case 13:return e.abrupt("break",47);case 14:return e.next=16,b(af({id:t.uniqueId,timestamp:t.timestamp,rate:t.data.rate,comment:t.data.comment}));case 16:return e.abrupt("break",47);case 17:return e.next=19,b(rf({id:t.uniqueId,timestamp:t.timestamp,authorId:t.data.author.login||"visitor",authorType:t.data.author.type,url:t.data.files[0].url,size:t.data.files[0].size,contentType:t.data.files[0]["content-type"]}));case 19:return e.abrupt("break",47);case 20:return e.next=22,b(Zs({id:t.uniqueId,timestamp:t.timestamp,authorType:"agent",text:t.data.message,isMobile:t.data.isMobile,authorId:t.data.authorId}));case 22:return e.abrupt("break",47);case 23:return e.next=25,b(Js());case 25:return e.next=27,b(Ys.setPropertyChatState(fp));case 27:return e.next=29,b(Ys.removePropertySecuredToken());case 29:return Ul.removeItem("securedToken"),e.abrupt("break",47);case 31:return e.next=33,b(Xs({id:t.data.id,name:t.data.name,jobTitle:t.data.jobTitle,avatarUrl:t.data.avatarUrl}));case 33:return e.next=35,E(Tf.getPropertyChatId);case 35:if(r=e.sent){e.next=39;break}return e.next=39,b(Ys.setPropertyChatId(t.data.chatId));case 39:return e.abrupt("break",47);case 40:return e.next=42,b(nf({numberInQueue:t.data.numberInQueue,waitingTime:t.data.waitingTime}));case 42:return e.abrupt("break",47);case 43:return e.next=45,b(of({authorId:t.data.authorId,isTyping:t.data.isTyping}));case 45:return e.abrupt("break",47);case 46:return e.abrupt("return");case 47:case"end":return e.stop()}},bh,this)}function We(){var e,t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,T(wd.getActionName(),bt.expanding());case 2:e=r.sent;case 3:return r.next=6,y(e);case 6:return t=r.sent,r.next=9,I(Ue,t);case 9:r.next=3;break;case 11:case"end":return r.stop()}},xh,this)}function Fe(){var e,t,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Hf(w(ce));case 3:return e=n.sent,n.next=6,Hf(w(De));case 6:return t=n.sent,n.next=9,Hf(w(ue));case 9:return r=n.sent,n.next=12,y(qf.getActionName());case 12:return n.next=14,j(e,t,r);case 14:return n.next=16,y(wh,Fe);case 16:n.next=0;break;case 18:case"end":return n.stop()}},_h,this)}function Be(e){var t=e.emitter;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hf(w(ne));case 2:return e.next=4,Hf(w(Ie));case 4:return e.next=6,Hf(w(Ce,{emitter:t}));case 6:return e.next=8,Hf(w(We));case 8:return e.next=10,Hf(w(Fe));case 10:case"end":return e.stop()}},Ih,this)}var qe="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ze=(t(function(e){!function(t){function r(e,t,r,a){var i=Object.create((t&&t.prototype instanceof o?t:o).prototype),u=new p(a||[]);return i._invoke=function(e,t,r){var o=w;return function(a,i){if(o===j)throw Error("Generator is already running");if(o===E){if("throw"===a)throw i;return h()}for(r.method=a,r.arg=i;;){var u=r.delegate;if(u){var c=s(u,r);if(c){if(c===T)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===w)throw o=E,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=j;var f=n(e,t,r);if("normal"===f.type){if(o=r.done?E:A,f.arg===T)continue;return{value:f.arg,done:r.done}}"throw"===f.type&&(o=E,r.method="throw",r.arg=f.arg)}}}(e,r,u),i}function n(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function o(){}function a(){}function i(){}function u(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function c(e){function r(t,o,a,i){var u=n(e[t],e,o);if("throw"!==u.type){var c=u.arg,s=c.value;return s&&"object"==typeof s&&m.call(s,"__await")?Promise.resolve(s.__await).then(function(e){r("next",e,a,i)},function(e){r("throw",e,a,i)}):Promise.resolve(s).then(function(e){c.value=e,a(c)},i)}i(u.arg)}"object"==typeof t.process&&t.process.domain&&(r=t.process.domain.bind(r));var o;this._invoke=function(e,t){function n(){return new Promise(function(n,o){r(e,t,n,o)})}return o=o?o.then(n,n):n()}}function s(e,t){var r=e.iterator[t.method];if(r===g){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=g,s(e,t),"throw"===t.method))return T;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return T}var o=n(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,T;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=g),t.delegate=null,T):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,T)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function d(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(m.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=g,t.done=!0,t};return n.next=n}}return{next:h}}function h(){return{value:g,done:!0}}var g,v=Object.prototype,m=v.hasOwnProperty,y="function"==typeof Symbol?Symbol:{},b=y.iterator||"@@iterator",x=y.asyncIterator||"@@asyncIterator",_=y.toStringTag||"@@toStringTag",I=t.regeneratorRuntime;if(I)e.exports=I;else{(I=t.regeneratorRuntime=e.exports).wrap=r;var w="suspendedStart",A="suspendedYield",j="executing",E="completed",T={},k={};k[b]=function(){return this};var O=Object.getPrototypeOf,S=O&&O(O(d([])));S&&S!==v&&m.call(S,b)&&(k=S);var R=i.prototype=o.prototype=Object.create(k);a.prototype=R.constructor=i,i.constructor=a,i[_]=a.displayName="GeneratorFunction",I.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===a||"GeneratorFunction"===(t.displayName||t.name))},I.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,_ in e||(e[_]="GeneratorFunction")),e.prototype=Object.create(R),e},I.awrap=function(e){return{__await:e}},u(c.prototype),c.prototype[x]=function(){return this},I.AsyncIterator=c,I.async=function(e,t,n,o){var a=new c(r(e,t,n,o));return I.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},u(R),R[_]="Generator",R[b]=function(){return this},R.toString=function(){return"[object Generator]"},I.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},I.values=d,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&m.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=g)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return a.type="throw",a.arg=e,r.next=t,n&&(r.method="next",r.arg=g),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return t("end");if(this.prev>=o.tryLoc){var i=m.call(o,"catchLoc"),u=m.call(o,"finallyLoc");if(i&&u){if(o.catchLoc>this.prev)return t(o.catchLoc,!0);if(o.finallyLoc>this.prev)return t(o.finallyLoc)}else if(i){if(o.catchLoc>this.prev)return t(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(o.finallyLoc>this.prev)return t(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(this.prev>=n.tryLoc&&m.call(n,"finallyLoc")&&n.finallyLoc>this.prev){var o=n;break}}!o||"break"!==e&&"continue"!==e||o.tryLoc>t||t>o.finallyLoc||(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,T):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),T},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),T}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;l(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:d(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=g),T}}}}("object"==typeof qe?qe:"object"==typeof window?window:"object"==typeof self?self:qe)}),Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}),Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve=function(e){return"@@redux-saga/"+e},He=Ve("TASK"),Ke=Ve("HELPER"),$e=Ve("MATCH"),Ye=Ve("CANCEL_PROMISE"),Qe=Ve("SAGA_ACTION"),Ze=Ve("SELF_CANCELLATION"),Je=function(e){return function(){return e}}(!0),Xe=function(){},et=function(e){return e},tt=Object.prototype.hasOwnProperty,rt={undef:function(e){return null===e||void 0===e},notUndef:function(e){return null!==e&&void 0!==e},func:function(e){return"function"==typeof e},number:function(e){return"number"==typeof e},string:function(e){return"string"==typeof e},array:Array.isArray,object:function(e){return e&&!rt.array(e)&&"object"===(void 0===e?"undefined":Ge(e))},promise:function(e){return e&&rt.func(e.then)},iterator:function(e){return e&&rt.func(e.next)&&rt.func(e.throw)},iterable:function(e){return e&&rt.func(Symbol)?rt.func(e[Symbol.iterator]):rt.array(e)},task:function(e){return e&&e[He]},observable:function(e){return e&&rt.func(e.subscribe)},buffer:function(e){return e&&rt.func(e.isEmpty)&&rt.func(e.take)&&rt.func(e.put)},pattern:function(e){return e&&(rt.string(e)||"symbol"===(void 0===e?"undefined":Ge(e))||rt.func(e)||rt.array(e))},channel:function(e){return e&&rt.func(e.take)&&rt.func(e.close)},helper:function(e){return e&&e[Ke]},stringableFunc:function(e){return rt.func(e)&&n(e,"toString")}},nt={assign:function(e,t){for(var r in t)n(t,r)&&(e[r]=t[r])}},ot={from:function(e){var t=Array(e.length);for(var r in e)n(e,r)&&(t[r]=e[r]);return t}},at=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){return++e}}(),it=function(e){throw e},ut=function(e){return{value:e,done:!0}},ct=function(e,t){return e+" has been deprecated in favor of "+t+", please update your code"},st=function(e){return Error("\n  redux-saga: Error checking hooks detected an inconsistent state. This is likely a bug\n  in redux-saga code and not yours. Thanks for reporting this in the project's github repo.\n  Error: "+e+"\n")},ft=function(e,t){return(e?e+".":"")+"setContext(props): argument "+t+" is not a plain object"},lt=function(e){return function(t){return e(Object.defineProperty(t,Qe,{value:!0}))}},pt={done:!0,value:void 0},dt={},ht="Channel's Buffer overflow!",gt=1,vt=3,mt=4,yt={isEmpty:Je,put:Xe,take:Xe},bt={none:function(){return yt},fixed:function(e){return f(e,gt)},dropping:function(e){return f(e,2)},sliding:function(e){return f(e,vt)},expanding:function(e){return f(e,mt)}},xt=[],_t=0,It=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wt="@@redux-saga/CHANNEL_END",At={type:wt},jt=function(e){return e&&e.type===wt},Et="invalid buffer passed to channel factory function",Tt="Saga was provided with an undefined action",kt=Ve("IO"),Ot="TAKE",St="PUT",Rt="ALL",Ct="CALL",Pt="FORK",Nt="CANCEL",Lt="SELECT",Mt="ACTION_CHANNEL",Dt="\n(HINT: if you are getting this errors in tests, consider using createMockTask from redux-saga/utils)",Ut=function(e,t){var r;return r={},r[kt]=!0,r[e]=t,r};y.maybe=function(){var e=y.apply(void 0,arguments);return e[Ot].maybe=!0,e},b.sync=s(b.resolve=function(){var e=b.apply(void 0,arguments);return e[St].resolve=!0,e},ct("put.sync","put.resolve"));var Wt,Ft=function(e){return function(t){return t&&t[kt]&&t[e]}},Bt={take:Ft(Ot),put:Ft(St),all:Ft(Rt),race:Ft("RACE"),call:Ft(Ct),cps:Ft("CPS"),fork:Ft(Pt),join:Ft("JOIN"),cancel:Ft(Nt),select:Ft(Lt),actionChannel:Ft(Mt),cancelled:Ft("CANCELLED"),flush:Ft("FLUSH"),getContext:Ft("GET_CONTEXT"),setContext:Ft("SET_CONTEXT")},qt=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt="proc first argument (Saga function result) must be an iterator",Vt={toString:function(){return"@@redux-saga/CHANNEL_END"}},Ht={toString:function(){return"@@redux-saga/TASK_CANCEL"}},Kt={wildcard:function(){return Je},default:function(e){return"symbol"===(void 0===e?"undefined":zt(e))?function(t){return t.type===e}:function(t){return t.type===e+""}},array:function(e){return function(t){return e.some(function(e){return O(e)(t)})}},predicate:function(e){return function(t){return e(t)}}},$t=function(e){return{fn:e}},Yt="object"==typeof global&&global&&global.Object===Object&&global,Qt="object"==typeof self&&self&&self.Object===Object&&self,Zt=(Yt||Qt||Function("return this")()).Symbol,Jt=Object.prototype,Xt=Jt.hasOwnProperty,er=Jt.toString,tr=Zt?Zt.toStringTag:void 0,rr=Object.prototype.toString,nr="[object Null]",or="[object Undefined]",ar=Zt?Zt.toStringTag:void 0,ir=function(e,t){return function(r){return e(t(r))}}(Object.getPrototypeOf,Object),ur="[object Object]",cr=Function.prototype.toString,sr=Object.prototype.hasOwnProperty,fr=cr.call(Object),lr=function(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}(Wt="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()),pr={INIT:"@@redux/INIT"},dr=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hr=t(function(e,t){t.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},t.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},t.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},t.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},t.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},t.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},t.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},t.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},t.placeholder={bind:!0,bindKey:!0,curry:!0,curryRight:!0,partial:!0,partialRight:!0},t.realToAlias=function(){var e=Object.prototype.hasOwnProperty,r=t.aliasToReal,n={};for(var o in r){var a=r[o];e.call(n,a)?n[a].push(o):n[a]=[o]}return n}(),t.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},t.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},t.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}}),gr={},vr=Array.prototype.push,mr=D,yr=function(e){return e},br="object"==typeof qe&&qe&&qe.Object===Object&&qe,xr="object"==typeof self&&self&&self.Object===Object&&self,_r=br||xr||Function("return this")(),Ir=_r.Symbol,wr=Object.prototype,Ar=wr.hasOwnProperty,jr=wr.toString,Er=Ir?Ir.toStringTag:void 0,Tr=function(e){var t=Ar.call(e,Er),r=e[Er];try{e[Er]=void 0;var n=!0}catch(e){}var o=jr.call(e);return n&&(t?e[Er]=r:delete e[Er]),o},kr=Object.prototype.toString,Or=function(e){return kr.call(e)},Sr="[object Null]",Rr="[object Undefined]",Cr=Ir?Ir.toStringTag:void 0,Pr=function(e){return null==e?void 0===e?Rr:Sr:Cr&&Cr in Object(e)?Tr(e):Or(e)},Nr=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Lr="[object AsyncFunction]",Mr="[object Function]",Dr="[object GeneratorFunction]",Ur="[object Proxy]",Wr=function(e){if(!Nr(e))return!1;var t=Pr(e);return t==Mr||t==Dr||t==Lr||t==Ur},Fr=_r["__core-js_shared__"],Br=function(){var e=/[^.]+$/.exec(Fr&&Fr.keys&&Fr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),qr=function(e){return!!Br&&Br in e},zr=Function.prototype.toString,Gr=function(e){if(null!=e){try{return zr.call(e)}catch(e){}try{return e+""}catch(e){}}return""},Vr=/^\[object .+?Constructor\]$/,Hr=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kr=function(e){return!(!Nr(e)||qr(e))&&(Wr(e)?Hr:Vr).test(Gr(e))},$r=function(e,t){return null==e?void 0:e[t]},Yr=function(e,t){var r=$r(e,t);return Kr(r)?r:void 0},Qr=Yr(_r,"WeakMap"),Zr=Qr&&new Qr,Jr=Zr?function(e,t){return Zr.set(e,t),e}:yr,Xr=Object.create,en=function(){function e(){}return function(t){if(!Nr(t))return{};if(Xr)return Xr(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),tn=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=en(e.prototype),n=e.apply(r,t);return Nr(n)?n:r}},rn=1,nn=function(e,t,r){function n(){return(this&&this!==_r&&this instanceof n?a:e).apply(o?r:this,arguments)}var o=t&rn,a=tn(e);return n},on=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},an=Math.max,un=function(e,t,r,n){for(var o=-1,a=e.length,i=r.length,u=-1,c=t.length,s=an(a-i,0),f=Array(c+s),l=!n;++u<c;)f[u]=t[u];for(;++o<i;)(l||a>o)&&(f[r[o]]=e[o]);for(;s--;)f[u++]=e[o++];return f},cn=Math.max,sn=function(e,t,r,n){for(var o=-1,a=e.length,i=-1,u=r.length,c=-1,s=t.length,f=cn(a-u,0),l=Array(f+s),p=!n;++o<f;)l[o]=e[o];for(var d=o;++c<s;)l[d+c]=t[c];for(;++i<u;)(p||a>o)&&(l[d+r[i]]=e[o++]);return l},fn=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n},ln=function(){},pn=4294967295;(U.prototype=en(ln.prototype)).constructor=U;var dn=U,hn=Zr?function(e){return Zr.get(e)}:function(){},gn={},vn=Object.prototype.hasOwnProperty,mn=function(e){for(var t=e.name+"",r=gn[t],n=vn.call(gn,t)?r.length:0;n--;){var o=r[n],a=o.func;if(null==a||a==e)return o.name}return t};(W.prototype=en(ln.prototype)).constructor=W;var yn=W,bn=Array.isArray,xn=function(e){return null!=e&&"object"==typeof e},_n=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t},In=function(e){if(e instanceof dn)return e.clone();var t=new yn(e.__wrapped__,e.__chain__);return t.__actions__=_n(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t},wn=Object.prototype.hasOwnProperty;(F.prototype=ln.prototype).constructor=F;var An=F,jn=function(e){var t=mn(e),r=An[t];if("function"!=typeof r||!(t in dn.prototype))return!1;if(e===r)return!0;var n=hn(r);return!!n&&e===n[0]},En=800,Tn=16,kn=Date.now,On=function(e){var t=0,r=0;return function(){var n=kn(),o=Tn-(n-r);if(r=n,o>0){if(++t>=En)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},Sn=On(Jr),Rn=/\{\n\/\* \[wrapped with (.+)\] \*/,Cn=/,? & /,Pn=function(e){var t=e.match(Rn);return t?t[1].split(Cn):[]},Nn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ln=function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(Nn,"{\n/* [wrapped with "+t+"] */\n")},Mn=function(e){return function(){return e}},Dn=function(){try{var e=Yr(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Un=On(Dn?function(e,t){return Dn(e,"toString",{configurable:!0,enumerable:!1,value:Mn(t),writable:!0})}:yr),Wn=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e},Fn=function(e,t,r,n){for(var o=e.length,a=r+(n?1:-1);n?a--:++a<o;)if(t(e[a],a,e))return a;return-1},Bn=function(e){return e!=e},qn=function(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1},zn=function(e,t,r){return t==t?qn(e,t,r):Fn(e,Bn,r)},Gn=function(e,t){return!!(null==e?0:e.length)&&zn(e,t,0)>-1},Vn=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Hn=function(e,t){return Wn(Vn,function(r){var n="_."+r[0];t&r[1]&&!Gn(e,n)&&e.push(n)}),e.sort()},Kn=function(e,t,r){var n=t+"";return Un(e,Ln(n,Hn(Pn(n),r)))},$n=1,Yn=2,Qn=4,Zn=8,Jn=32,Xn=64,eo=function(e,t,r,n,o,a,i,u,c,s){var f=t&Zn;t|=f?Jn:Xn,(t&=~(f?Xn:Jn))&Qn||(t&=~($n|Yn));var l=[e,t,o,f?a:void 0,f?i:void 0,f?void 0:a,f?void 0:i,u,c,s],p=r.apply(void 0,l);return jn(e)&&Sn(p,l),p.placeholder=n,Kn(p,e,t)},to=function(e){return e.placeholder},ro=9007199254740991,no=/^(?:0|[1-9]\d*)$/,oo=function(e,t){return!!(t=null==t?ro:t)&&("number"==typeof e||no.test(e))&&e>-1&&e%1==0&&t>e},ao=Math.min,io=function(e,t){for(var r=e.length,n=ao(t.length,r),o=_n(e);n--;){var a=t[n];e[n]=oo(a,r)?o[a]:void 0}return e},uo="__lodash_placeholder__",co=function(e,t){for(var r=-1,n=e.length,o=0,a=[];++r<n;){var i=e[r];i!==t&&i!==uo||(e[r]=uo,a[o++]=r)}return a},so=1,fo=2,lo=8,po=16,ho=128,go=512,vo=B,mo=function(e,t,r){function n(){for(var a=arguments.length,i=Array(a),u=a,c=to(n);u--;)i[u]=arguments[u];var s=3>a&&i[0]!==c&&i[a-1]!==c?[]:co(i,c);return a-=s.length,r>a?eo(e,t,vo,n.placeholder,void 0,i,s,void 0,void 0,r-a):on(this&&this!==_r&&this instanceof n?o:e,this,i)}var o=tn(e);return n},yo=1,bo=function(e,t,r,n){function o(){for(var t=-1,u=arguments.length,c=-1,s=n.length,f=Array(s+u),l=this&&this!==_r&&this instanceof o?i:e;++c<s;)f[c]=n[c];for(;u--;)f[c++]=arguments[++t];return on(l,a?r:this,f)}var a=t&yo,i=tn(e);return o},xo="__lodash_placeholder__",_o=1,Io=2,wo=4,Ao=8,jo=128,Eo=256,To=Math.min,ko=function(e,t){var r=e[1],n=t[1],o=r|n;if((_o|Io|jo)<=o&&!(n==jo&&r==Ao||n==jo&&r==Eo&&t[8]>=e[7].length||n==(jo|Eo)&&t[8]>=t[7].length&&r==Ao))return e;n&_o&&(e[2]=t[2],o|=r&_o?0:wo);var a=t[3];if(a){var i=e[3];e[3]=i?un(i,a,t[4]):a,e[4]=i?co(e[3],xo):t[4]}return(a=t[5])&&(e[5]=(i=e[5])?sn(i,a,t[6]):a,e[6]=i?co(e[5],xo):t[6]),(a=t[7])&&(e[7]=a),n&jo&&(e[8]=null==e[8]?t[8]:To(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o,e},Oo="[object Symbol]",So=function(e){return"symbol"==typeof e||xn(e)&&Pr(e)==Oo},Ro=NaN,Co=/^\s+|\s+$/g,Po=/^[-+]0x[0-9a-f]+$/i,No=/^0b[01]+$/i,Lo=/^0o[0-7]+$/i,Mo=parseInt,Do=function(e){if("number"==typeof e)return e;if(So(e))return Ro;if(Nr(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Nr(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Co,"");var r=No.test(e);return r||Lo.test(e)?Mo(e.slice(2),r?2:8):Po.test(e)?Ro:+e},Uo=1/0,Wo=1.7976931348623157e308,Fo=function(e){if(!e)return 0===e?e:0;if((e=Do(e))===Uo||e===-Uo)return(0>e?-1:1)*Wo;return e==e?e:0},Bo=function(e){var t=Fo(e),r=t%1;return t==t?r?t-r:t:0},qo="Expected a function",zo=1,Go=2,Vo=8,Ho=16,Ko=32,$o=64,Yo=Math.max,Qo=function(e,t,r,n,o,a,i,u){var c=t&Go;if(!c&&"function"!=typeof e)throw new TypeError(qo);var s=n?n.length:0;if(s||(t&=~(Ko|$o),n=o=void 0),i=void 0===i?i:Yo(Bo(i),0),u=void 0===u?u:Bo(u),s-=o?o.length:0,t&$o){var f=n,l=o;n=o=void 0}var p=c?void 0:hn(e),d=[e,t,r,n,o,f,l,a,i,u];if(p&&ko(d,p),e=d[0],t=d[1],r=d[2],n=d[3],o=d[4],!(u=d[9]=void 0===d[9]?c?0:e.length:Yo(d[9]-s,0))&&t&(Vo|Ho)&&(t&=~(Vo|Ho)),t&&t!=zo)h=t==Vo||t==Ho?mo(e,t,u):t!=Ko&&t!=(zo|Ko)||o.length?vo.apply(void 0,d):bo(e,t,r,n);else var h=nn(e,t,r);return Kn((p?Jr:Sn)(h,d),e,t)},Zo=128,Jo=function(e,t,r){return t=r?void 0:t,t=e&&null==t?e.length:t,Qo(e,Zo,void 0,void 0,void 0,void 0,t)},Xo=function(e,t,r){"__proto__"==t&&Dn?Dn(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},ea=function(e,t){return e===t||e!=e&&t!=t},ta=Object.prototype.hasOwnProperty,ra=function(e,t,r){var n=e[t];ta.call(e,t)&&ea(n,r)&&(void 0!==r||t in e)||Xo(e,t,r)},na=function(e,t,r,n){var o=!r;r||(r={});for(var a=-1,i=t.length;++a<i;){var u=t[a],c=n?n(r[u],e[u],u,r,e):void 0;void 0===c&&(c=e[u]),o?Xo(r,u,c):ra(r,u,c)}return r},oa=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n},aa="[object Arguments]",ia=function(e){return xn(e)&&Pr(e)==aa},ua=Object.prototype,ca=ua.hasOwnProperty,sa=ua.propertyIsEnumerable,fa=ia(function(){return arguments}())?ia:function(e){return xn(e)&&ca.call(e,"callee")&&!sa.call(e,"callee")},la=function(){return!1},pa=t(function(e,t){var r=t&&!t.nodeType&&t,n=r&&!0&&e&&!e.nodeType&&e,o=n&&n.exports===r?_r.Buffer:void 0;e.exports=(o?o.isBuffer:void 0)||la}),da=9007199254740991,ha=function(e){return"number"==typeof e&&e>-1&&e%1==0&&da>=e},ga={};ga["[object Float32Array]"]=ga["[object Float64Array]"]=ga["[object Int8Array]"]=ga["[object Int16Array]"]=ga["[object Int32Array]"]=ga["[object Uint8Array]"]=ga["[object Uint8ClampedArray]"]=ga["[object Uint16Array]"]=ga["[object Uint32Array]"]=!0,ga["[object Arguments]"]=ga["[object Array]"]=ga["[object ArrayBuffer]"]=ga["[object Boolean]"]=ga["[object DataView]"]=ga["[object Date]"]=ga["[object Error]"]=ga["[object Function]"]=ga["[object Map]"]=ga["[object Number]"]=ga["[object Object]"]=ga["[object RegExp]"]=ga["[object Set]"]=ga["[object String]"]=ga["[object WeakMap]"]=!1;var va=function(e){return xn(e)&&ha(e.length)&&!!ga[Pr(e)]},ma=function(e){return function(t){return e(t)}},ya=t(function(e,t){var r=t&&!t.nodeType&&t,n=r&&!0&&e&&!e.nodeType&&e,o=n&&n.exports===r&&br.process,a=function(){try{return o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=a}),ba=ya&&ya.isTypedArray,xa=ba?ma(ba):va,_a=Object.prototype.hasOwnProperty,Ia=function(e,t){var r=bn(e),n=!r&&fa(e),o=!r&&!n&&pa(e),a=!r&&!n&&!o&&xa(e),i=r||n||o||a,u=i?oa(e.length,String):[],c=u.length;for(var s in e)!t&&!_a.call(e,s)||i&&("length"==s||o&&("offset"==s||"parent"==s)||a&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||oo(s,c))||u.push(s);return u},wa=Object.prototype,Aa=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||wa)},ja=function(e,t){return function(r){return e(t(r))}},Ea=ja(Object.keys,Object),Ta=Object.prototype.hasOwnProperty,ka=function(e){if(!Aa(e))return Ea(e);var t=[];for(var r in Object(e))Ta.call(e,r)&&"constructor"!=r&&t.push(r);return t},Oa=function(e){return null!=e&&ha(e.length)&&!Wr(e)},Sa=function(e){return Oa(e)?Ia(e):ka(e)},Ra=function(e,t){return e&&na(t,Sa(t),e)},Ca=function(e,t){for(var r=e.length;r--;)if(ea(e[r][0],t))return r;return-1},Pa=Array.prototype.splice,Na=function(e){var t=this.__data__,r=Ca(t,e);return r>=0&&(r==t.length-1?t.pop():Pa.call(t,r,1),--this.size,!0)},La=function(e){var t=this.__data__,r=Ca(t,e);return 0>r?void 0:t[r][1]},Ma=function(e){return Ca(this.__data__,e)>-1},Da=function(e,t){var r=this.__data__,n=Ca(r,e);return 0>n?(++this.size,r.push([e,t])):r[n][1]=t,this};q.prototype.clear=function(){this.__data__=[],this.size=0},q.prototype.delete=Na,q.prototype.get=La,q.prototype.has=Ma,q.prototype.set=Da;var Ua=q,Wa=function(){this.__data__=new Ua,this.size=0},Fa=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Ba=function(e){return this.__data__.get(e)},qa=function(e){return this.__data__.has(e)},za=Yr(_r,"Map"),Ga=Yr(Object,"create"),Va=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ha="__lodash_hash_undefined__",Ka=Object.prototype.hasOwnProperty,$a=function(e){var t=this.__data__;if(Ga){var r=t[e];return r===Ha?void 0:r}return Ka.call(t,e)?t[e]:void 0},Ya=Object.prototype.hasOwnProperty,Qa=function(e){var t=this.__data__;return Ga?void 0!==t[e]:Ya.call(t,e)},Za="__lodash_hash_undefined__",Ja=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Ga&&void 0===t?Za:t,this};z.prototype.clear=function(){this.__data__=Ga?Ga(null):{},this.size=0},z.prototype.delete=Va,z.prototype.get=$a,z.prototype.has=Qa,z.prototype.set=Ja;var Xa=z,ei=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},ti=function(e,t){var r=e.__data__;return ei(t)?r["string"==typeof t?"string":"hash"]:r.map},ri=function(e){var t=ti(this,e).delete(e);return this.size-=t?1:0,t},ni=function(e){return ti(this,e).get(e)},oi=function(e){return ti(this,e).has(e)},ai=function(e,t){var r=ti(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};G.prototype.clear=function(){this.size=0,this.__data__={hash:new Xa,map:new(za||Ua),string:new Xa}},G.prototype.delete=ri,G.prototype.get=ni,G.prototype.has=oi,G.prototype.set=ai;var ii=G,ui=200,ci=function(e,t){var r=this.__data__;if(r instanceof Ua){var n=r.__data__;if(!za||ui-1>n.length)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ii(n)}return r.set(e,t),this.size=r.size,this};V.prototype.clear=Wa,V.prototype.delete=Fa,V.prototype.get=Ba,V.prototype.has=qa,V.prototype.set=ci;var si=V,fi=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t},li=Object.prototype.hasOwnProperty,pi=function(e){if(!Nr(e))return fi(e);var t=Aa(e),r=[];for(var n in e)("constructor"!=n||!t&&li.call(e,n))&&r.push(n);return r},di=function(e){return Oa(e)?Ia(e,!0):pi(e)},hi=function(e,t){return e&&na(t,di(t),e)},gi=t(function(e,t){var r=t&&!t.nodeType&&t,n=r&&!0&&e&&!e.nodeType&&e,o=n&&n.exports===r?_r.Buffer:void 0,a=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=a?a(r):new e.constructor(r);return e.copy(n),n}}),vi=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,a=[];++r<n;){var i=e[r];t(i,r,e)&&(a[o++]=i)}return a},mi=function(){return[]},yi=Object.prototype.propertyIsEnumerable,bi=Object.getOwnPropertySymbols,xi=bi?function(e){return null==e?[]:(e=Object(e),vi(bi(e),function(t){return yi.call(e,t)}))}:mi,_i=function(e,t){return na(e,xi(e),t)},Ii=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e},wi=ja(Object.getPrototypeOf,Object),Ai=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Ii(t,xi(e)),e=wi(e);return t}:mi,ji=function(e,t){return na(e,Ai(e),t)},Ei=function(e,t,r){var n=t(e);return bn(e)?n:Ii(n,r(e))},Ti=function(e){return Ei(e,Sa,xi)},ki=function(e){return Ei(e,di,Ai)},Oi=Yr(_r,"DataView"),Si=Yr(_r,"Promise"),Ri=Yr(_r,"Set"),Ci="[object Promise]",Pi="[object WeakMap]",Ni="[object DataView]",Li=Gr(Oi),Mi=Gr(za),Di=Gr(Si),Ui=Gr(Ri),Wi=Gr(Qr),Fi=Pr;(Oi&&Fi(new Oi(new ArrayBuffer(1)))!=Ni||za&&"[object Map]"!=Fi(new za)||Si&&Fi(Si.resolve())!=Ci||Ri&&"[object Set]"!=Fi(new Ri)||Qr&&Fi(new Qr)!=Pi)&&(Fi=function(e){var t=Pr(e),r="[object Object]"==t?e.constructor:void 0,n=r?Gr(r):"";if(n)switch(n){case Li:return Ni;case Mi:return"[object Map]";case Di:return Ci;case Ui:return"[object Set]";case Wi:return Pi}return t});var Bi=Fi,qi=Object.prototype.hasOwnProperty,zi=function(e){var t=e.length,r=e.constructor(t);return t&&"string"==typeof e[0]&&qi.call(e,"index")&&(r.index=e.index,r.input=e.input),r},Gi=_r.Uint8Array,Vi=function(e){var t=new e.constructor(e.byteLength);return new Gi(t).set(new Gi(e)),t},Hi=function(e,t){var r=t?Vi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)},Ki=function(e,t){return e.set(t[0],t[1]),e},$i=function(e,t,r,n){var o=-1,a=null==e?0:e.length;for(n&&a&&(r=e[++o]);++o<a;)r=t(r,e[o],o,e);return r},Yi=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r},Qi=1,Zi=function(e,t,r){var n=t?r(Yi(e),Qi):Yi(e);return $i(n,Ki,new e.constructor)},Ji=/\w*$/,Xi=function(e){var t=new e.constructor(e.source,Ji.exec(e));return t.lastIndex=e.lastIndex,t},eu=function(e,t){return e.add(t),e},tu=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r},ru=1,nu=function(e,t,r){var n=t?r(tu(e),ru):tu(e);return $i(n,eu,new e.constructor)},ou=Ir?Ir.prototype:void 0,au=ou?ou.valueOf:void 0,iu=function(e){return au?Object(au.call(e)):{}},uu=function(e,t){var r=t?Vi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},cu="[object Boolean]",su="[object Date]",fu="[object Map]",lu="[object Number]",pu="[object RegExp]",du="[object Set]",hu="[object String]",gu="[object Symbol]",vu="[object ArrayBuffer]",mu="[object DataView]",yu="[object Float32Array]",bu="[object Float64Array]",xu="[object Int8Array]",_u="[object Int16Array]",Iu="[object Int32Array]",wu="[object Uint8Array]",Au="[object Uint8ClampedArray]",ju="[object Uint16Array]",Eu="[object Uint32Array]",Tu=function(e,t,r,n){var o=e.constructor;switch(t){case vu:return Vi(e);case cu:case su:return new o(+e);case mu:return Hi(e,n);case yu:case bu:case xu:case _u:case Iu:case wu:case Au:case ju:case Eu:return uu(e,n);case fu:return Zi(e,n,r);case lu:case hu:return new o(e);case pu:return Xi(e);case du:return nu(e,n,r);case gu:return iu(e)}},ku=function(e){return"function"!=typeof e.constructor||Aa(e)?{}:en(wi(e))},Ou=1,Su=2,Ru=4,Cu="[object Arguments]",Pu="[object Function]",Nu="[object GeneratorFunction]",Lu="[object Object]",Mu={};Mu[Cu]=Mu["[object Array]"]=Mu["[object ArrayBuffer]"]=Mu["[object DataView]"]=Mu["[object Boolean]"]=Mu["[object Date]"]=Mu["[object Float32Array]"]=Mu["[object Float64Array]"]=Mu["[object Int8Array]"]=Mu["[object Int16Array]"]=Mu["[object Int32Array]"]=Mu["[object Map]"]=Mu["[object Number]"]=Mu[Lu]=Mu["[object RegExp]"]=Mu["[object Set]"]=Mu["[object String]"]=Mu["[object Symbol]"]=Mu["[object Uint8Array]"]=Mu["[object Uint8ClampedArray]"]=Mu["[object Uint16Array]"]=Mu["[object Uint32Array]"]=!0,Mu["[object Error]"]=Mu[Pu]=Mu["[object WeakMap]"]=!1;var Du=H,Uu=4,Wu=function(e){return Du(e,Uu)},Fu=8;K.placeholder={};var Bu=K,qu="__lodash_hash_undefined__",zu=function(e){return this.__data__.has(e)};$.prototype.add=$.prototype.push=function(e){return this.__data__.set(e,qu),this},$.prototype.has=zu;var Gu=$,Vu=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1},Hu=function(e,t){return e.has(t)},Ku=1,$u=2,Yu=function(e,t,r,n,o,a){var i=r&Ku,u=e.length,c=t.length;if(!(u==c||i&&c>u))return!1;var s=a.get(e);if(s&&a.get(t))return s==t;var f=-1,l=!0,p=r&$u?new Gu:void 0;for(a.set(e,t),a.set(t,e);++f<u;){var d=e[f],h=t[f];if(n)var g=i?n(h,d,f,t,e,a):n(d,h,f,e,t,a);if(void 0!==g){if(g)continue;l=!1;break}if(p){if(!Vu(t,function(e,t){if(!Hu(p,t)&&(d===e||o(d,e,r,n,a)))return p.push(t)})){l=!1;break}}else if(d!==h&&!o(d,h,r,n,a)){l=!1;break}}return a.delete(e),a.delete(t),l},Qu=1,Zu=2,Ju="[object Boolean]",Xu="[object Date]",ec="[object Error]",tc="[object Map]",rc="[object Number]",nc="[object RegExp]",oc="[object Set]",ac="[object String]",ic="[object Symbol]",uc="[object ArrayBuffer]",cc="[object DataView]",sc=Ir?Ir.prototype:void 0,fc=sc?sc.valueOf:void 0,lc=function(e,t,r,n,o,a,i){switch(r){case cc:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case uc:return!(e.byteLength!=t.byteLength||!a(new Gi(e),new Gi(t)));case Ju:case Xu:case rc:return ea(+e,+t);case ec:return e.name==t.name&&e.message==t.message;case nc:case ac:return e==t+"";case tc:var u=Yi;case oc:if(u||(u=tu),e.size!=t.size&&!(n&Qu))return!1;var c=i.get(e);if(c)return c==t;n|=Zu,i.set(e,t);var s=Yu(u(e),u(t),n,o,a,i);return i.delete(e),s;case ic:if(fc)return fc.call(e)==fc.call(t)}return!1},pc=1,dc=Object.prototype.hasOwnProperty,hc=function(e,t,r,n,o,a){var i=r&pc,u=Ti(e),c=u.length;if(c!=Ti(t).length&&!i)return!1;for(var s=c;s--;){var f=u[s];if(!(i?f in t:dc.call(t,f)))return!1}var l=a.get(e);if(l&&a.get(t))return l==t;var p=!0;a.set(e,t),a.set(t,e);for(var d=i;++s<c;){var h=e[f=u[s]],g=t[f];if(n)var v=i?n(g,h,f,t,e,a):n(h,g,f,e,t,a);if(!(void 0===v?h===g||o(h,g,r,n,a):v)){p=!1;break}d||(d="constructor"==f)}if(p&&!d){var m=e.constructor,y=t.constructor;m!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y)&&(p=!1)}return a.delete(e),a.delete(t),p},gc=1,vc="[object Arguments]",mc="[object Array]",yc="[object Object]",bc=Object.prototype.hasOwnProperty,xc=function(e,t,r,n,o,a){var i=bn(e),u=bn(t),c=i?mc:Bi(e),s=u?mc:Bi(t),f=(c=c==vc?yc:c)==yc,l=(s=s==vc?yc:s)==yc,p=c==s;if(p&&pa(e)){if(!pa(t))return!1;i=!0,f=!1}if(p&&!f)return a||(a=new si),i||xa(e)?Yu(e,t,r,n,o,a):lc(e,t,c,r,n,o,a);if(!(r&gc)){var d=f&&bc.call(e,"__wrapped__"),h=l&&bc.call(t,"__wrapped__");if(d||h){var g=d?e.value():e,v=h?t.value():t;return a||(a=new si),o(g,v,r,n,a)}}return!!p&&(a||(a=new si),hc(e,t,r,n,o,a))},_c=Y,Ic=1,wc=2,Ac=function(e,t,r,n){var o=r.length,a=o,i=!n;if(null==e)return!a;for(e=Object(e);o--;){var u=r[o];if(i&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<a;){var c=(u=r[o])[0],s=e[c],f=u[1];if(i&&u[2]){if(void 0===s&&!(c in e))return!1}else{var l=new si;if(n)var p=n(s,f,c,e,t,l);if(!(void 0===p?_c(f,s,Ic|wc,n,l):p))return!1}}return!0},jc=function(e){return e==e&&!Nr(e)},Ec=function(e){for(var t=Sa(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,jc(o)]}return t},Tc=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}},kc=function(e){var t=Ec(e);return 1==t.length&&t[0][2]?Tc(t[0][0],t[0][1]):function(r){return r===e||Ac(r,e,t)}},Oc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Sc=/^\w*$/,Rc=function(e,t){if(bn(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!So(e))||Sc.test(e)||!Oc.test(e)||null!=t&&e in Object(t)},Cc="Expected a function";Q.Cache=ii;var Pc=Q,Nc=500,Lc=/^\./,Mc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dc=/\\(\\)?/g,Uc=function(e){var t=Pc(e,function(e){return r.size===Nc&&r.clear(),e}),r=t.cache;return t}(function(e){var t=[];return Lc.test(e)&&t.push(""),e.replace(Mc,function(e,r,n,o){t.push(n?o.replace(Dc,"$1"):r||e)}),t}),Wc=function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o},Fc=1/0,Bc=Ir?Ir.prototype:void 0,qc=Bc?Bc.toString:void 0,zc=Z,Gc=function(e){return null==e?"":zc(e)},Vc=function(e,t){return bn(e)?e:Rc(e,t)?[e]:Uc(Gc(e))},Hc=1/0,Kc=function(e){if("string"==typeof e||So(e))return e;var t=e+"";return"0"==t&&1/e==-Hc?"-0":t},$c=function(e,t){for(var r=0,n=(t=Vc(t,e)).length;null!=e&&n>r;)e=e[Kc(t[r++])];return r&&r==n?e:void 0},Yc=function(e,t,r){var n=null==e?void 0:$c(e,t);return void 0===n?r:n},Qc=function(e,t){return null!=e&&t in Object(e)},Zc=function(e,t,r){for(var n=-1,o=(t=Vc(t,e)).length,a=!1;++n<o;){var i=Kc(t[n]);if(!(a=null!=e&&r(e,i)))break;e=e[i]}return a||++n!=o?a:!!(o=null==e?0:e.length)&&ha(o)&&oo(i,o)&&(bn(e)||fa(e))},Jc=function(e,t){return null!=e&&Zc(e,t,Qc)},Xc=1,es=2,ts=function(e,t){return Rc(e)&&jc(t)?Tc(Kc(e),t):function(r){var n=Yc(r,e);return void 0===n&&n===t?Jc(r,e):_c(t,n,Xc|es)}},rs=function(e){return function(t){return null==t?void 0:t[e]}},ns=function(e){return function(t){return $c(t,e)}},os=function(e){return Rc(e)?rs(Kc(e)):ns(e)},as=function(e){return"function"==typeof e?e:null==e?yr:"object"==typeof e?bn(e)?ts(e[0],e[1]):kc(e):os(e)},is=1,us=function(e){return as("function"==typeof e?e:Du(e,is))},cs=Ir?Ir.isConcatSpreadable:void 0,ss=function(e){return bn(e)||fa(e)||!!(cs&&e&&e[cs])},fs=J,ls=function(e){return(null==e?0:e.length)?fs(e,1):[]},ps=Math.max,ds=function(e,t,r){return t=ps(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,a=ps(n.length-t,0),i=Array(a);++o<a;)i[o]=n[t+o];o=-1;for(var u=Array(t+1);++o<t;)u[o]=n[o];return u[t]=r(i),on(e,this,u)}},hs=function(e){return Un(ds(e,void 0,ls),e+"")},gs=hs(function(e,t){return Qo(e,256,void 0,void 0,void 0,t)}),vs={ary:Jo,assign:Ra,clone:Wu,curry:Bu,forEach:Wn,isArray:bn,isFunction:Wr,iteratee:us,keys:ka,rearg:gs,toInteger:Bo,toPath:function(e){return bn(e)?Wc(e,Kc):So(e)?[e]:_n(Uc(Gc(e)))}},ms=function(e,t,r){return mr(vs,e,t,r)},ys=ms("getOr",Yc);ys.placeholder=gr;var bs=ys,xs=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},_s=function(e,t,r){var n=-1,o=e.length;0>t&&(t=-t>o?0:o+t),0>(r=r>o?o:r)&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(o);++n<o;)a[n]=e[n+t];return a},Is=function(e,t){return 2>t.length?e:$c(e,_s(t,0,-1))},ws=function(e,t){return t=Vc(t,e),null==(e=Is(e,t))||delete e[Kc(xs(t))]},As="[object Object]",js=Function.prototype.toString,Es=Object.prototype.hasOwnProperty,Ts=js.call(Object),ks=function(e){if(!xn(e)||Pr(e)!=As)return!1;var t=wi(e);if(null===t)return!0;var r=Es.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&js.call(r)==Ts},Os=function(e){return ks(e)?void 0:e},Ss=ms("omit",hs(function(e,t){var r={};if(null==e)return r;var n=!1;t=Wc(t,function(t){return t=Vc(t,e),n||(n=t.length>1),t}),na(e,ki(e),r),n&&(r=Du(r,7,Os));for(var o=t.length;o--;)ws(r,t[o]);return r}));Ss.placeholder=gr;var Rs=Ss,Cs=function(e){return function(t,r,n){for(var o=-1,a=Object(t),i=n(t),u=i.length;u--;){var c=i[e?u:++o];if(!1===r(a[c],c,a))break}return t}}(),Ps=function(e,t){return e&&Cs(e,t,Sa)},Ns=function(e,t){return function(r,n){if(null==r)return r;if(!Oa(r))return e(r,n);for(var o=r.length,a=t?o:-1,i=Object(r);(t?a--:++a<o)&&!1!==n(i[a],a,i););return r}}(Ps),Ls=function(e,t){var r=-1,n=Oa(e)?Array(e.length):[];return Ns(e,function(e,o,a){n[++r]=t(e,o,a)}),n},Ms=ms("map",function(e,t){return(bn(e)?Wc:Ls)(e,as(t,3))});Ms.placeholder=gr;var Ds=Ms,Us=function(e,t){return Wc(t,function(t){return e[t]})},Ws={cap:!1,curry:!1,fixed:!1,immutable:!1,rearg:!1},Fs=ms("values",function(e){return null==e?[]:Us(e,Sa(e))},Ws);Fs.placeholder=gr;var Bs=Fs,qs=function(e,t,r,n,o){return o(e,function(e,o,a){r=n?(n=!1,e):t(r,e,o,a)}),r};ms("reduce",function(e,t,r){var n=bn(e)?$i:qs,o=3>arguments.length;return n(e,as(t,4),r,o,Ns)}).placeholder=gr;var zs=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gs=function(e,t){var r=function(){return{type:e,payload:t.apply(void 0,arguments)}};return r.getActionName=function(){return e},r},Vs=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Hs=function(e){var t;return t={},t["setProperty"+Vs(e)]=Gs("SET_PROPERTY_"+e.toUpperCase(),function(e){return{data:e}}),t["removeProperty"+Vs(e)]=Gs("REMOVE_PROPERTY_"+e.toUpperCase(),function(){return{propName:e}}),t},Ks=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$s={LICENSE:"license",GROUP:"group",SESSION_ID:"sessionId",SECURED_TOKEN:"securedToken",CHAT_ID:"chatId",CHAT_STATE:"chatState",CHAT_STATUS:"chatStatus",VISITOR_ID:"visitorId",CUSTOM_VISITOR_ID:"customVisitorId",LAST_MESSAGE_ID:"lastMessageId",CONNECTION_STATUS:"connectionStatus",SNEAK_PEEK:"sneakPeek",TICKET_FORM:"ticketForm",STATIC_CONFIG_VERSION:"staticConfigVersion",SECRET_ID:"secretId"},Ys=Ks({},Hs($s.LICENSE),Hs($s.GROUP),Hs($s.SESSION_ID),Hs($s.SECURED_TOKEN),Hs($s.CHAT_ID),Hs($s.CHAT_STATE),Hs($s.VISITOR_ID),Hs($s.CUSTOM_VISITOR_ID),Hs($s.LAST_MESSAGE_ID),Hs($s.CHAT_STATUS),Hs($s.CONNECTION_STATUS),Hs($s.SNEAK_PEEK),Hs($s.TICKET_FORM),Hs($s.STATIC_CONFIG_VERSION),Hs($s.SECRET_ID)),Qs=Gs("CHAT_STARTED",function(e){return{securedToken:e.securedToken}}),Zs=Gs("NEW_MESSAGE",function(e){return{id:e.id,timestamp:e.timestamp,authorType:e.authorType,authorId:e.authorId,text:e.text,chatId:e.chatId,isMobile:e.isMobile,customId:e.customId}}),Js=Gs("CHAT_ENDED",function(){return null}),Xs=Gs("NEW_AGENT",function(e){return{avatarUrl:e.avatarUrl,jobTitle:e.jobTitle,name:e.name,id:e.id}}),ef=Gs("VISITOR_DATA_SET",function(e){return{visitorData:e.visitorData,requestId:e.requestId}}),tf=Gs("VISITOR_DATA_SET_ERROR",function(e){return{error:e.error,requestId:e.requestId}}),rf=Gs("NEW_FILE",function(e){return{id:e.id,timestamp:e.timestamp,authorType:e.authorType,authorId:e.authorId,url:e.url,size:e.size,contentType:e.contentType}}),nf=Gs("VISITOR_QUEUED",function(e){return{numberInQueue:e.numberInQueue,waitingTime:e.waitingTime}}),of=Gs("TYPING_INDICATOR",function(e){return{authorId:e.authorId,isTyping:e.isTyping}}),af=Gs("RATE_CHAT",function(e){return{rate:e.rate,comment:e.comment}}),uf=Gs("SET_VISITOR_DATA",function(e){return{visitorData:e.visitorData,requestId:e.requestId}}),cf="Expected a function",sf=8,ff=32,lf=128,pf=256,df=ms("flowRight",function(e){return hs(function(t){var r=t.length,n=r,o=yn.prototype.thru;for(e&&t.reverse();n--;){var a=t[n];if("function"!=typeof a)throw new TypeError(cf);if(o&&!i&&"wrapper"==mn(a))var i=new yn([],!0)}for(n=i?n:r;++n<r;){var u=mn(a=t[n]),c="wrapper"==u?hn(a):void 0;i=c&&jn(c[0])&&c[1]==(lf|sf|ff|pf)&&!c[4].length&&1==c[9]?i[mn(c[0])].apply(i,c[3]):1==a.length&&jn(a)?i[u]():i.thru(a)}return function(){var e=arguments,n=e[0];if(i&&1==e.length&&bn(n))return i.plant(n).value();for(var o=0,a=r?t[o].apply(this,e):n;++o<r;)a=t[o].call(this,a);return a}})}(!0));df.placeholder=gr;var hf=df,gf=function(e,t,r){(void 0===r||ea(e[t],r))&&(void 0!==r||t in e)||Xo(e,t,r)},vf=function(e){return xn(e)&&Oa(e)},mf=function(e){return na(e,di(e))},yf=function(e,t,r,n,o,a,i){var u=e[r],c=t[r],s=i.get(c);if(s)gf(e,r,s);else{var f=a?a(u,c,r+"",e,t,i):void 0,l=void 0===f;if(l){var p=bn(c),d=!p&&pa(c),h=!p&&!d&&xa(c);f=c,p||d||h?bn(u)?f=u:vf(u)?f=_n(u):d?(l=!1,f=gi(c,!0)):h?(l=!1,f=uu(c,!0)):f=[]:ks(c)||fa(c)?(f=u,fa(u)?f=mf(u):(!Nr(u)||n&&Wr(u))&&(f=ku(c))):l=!1}l&&(i.set(c,f),o(f,c,n,a,i),i.delete(c)),gf(e,r,f)}},bf=X,xf=function(e,t){return Un(ds(e,t,yr),e+"")},_f=function(e,t,r){if(!Nr(r))return!1;var n=typeof t;return!!("number"==n?Oa(r)&&oo(t,r.length):"string"==n&&t in r)&&ea(r[t],e)},If=function(e){return xf(function(t,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,i=o>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,i&&_f(r[0],r[1],i)&&(a=3>o?void 0:a,o=1),t=Object(t);++n<o;){var u=r[n];u&&e(t,u,n,a)}return t})}(function(e,t,r){bf(e,t,r)}),wf=ms("mergeAll",If);wf.placeholder=gr;var Af,jf=wf,Ef=hf(jf,Ds(function(e){var t;return t={},t["SET_PROPERTY_"+e.toUpperCase()]=function(t,r){var n;return zs({},t,(n={},n[e]=r.data,n))},t["REMOVE_PROPERTY_"+e.toUpperCase()]=function(t){return zs({},Rs(e,t))},t}),Bs)($s),Tf=hf(jf,Ds(function(e){var t;return t={},t["getProperty"+Vs(e)]=function(t){return t[e]},t}),Bs)($s),kf=function(e){return e.environment},Of=(Af={},Af[uf.getActionName()]=function(e,t){return Ks({},e,{visitorData:t.visitorData})},Af),Sf=function(e){return e.visitorData},Rf=function(e,t){return function(r,n,o){var a=r||e;return t.hasOwnProperty(n.type)?t[n.type](a,n.payload,o):a}}({},Ks({},Of,Ef)),Cf="runSaga(storeInterface, saga, ...args): saga argument must be a Generator function!",Pf=function(){function e(t){var n=t.getState,f=t.dispatch,l=function(){var e=[];return{subscribe:function(t){return e.push(t),function(){return o(e,t)}},emit:function(t){for(var r=e.slice(),n=0,o=r.length;o>n;n++)r[n](t)}}}();return l.emit=(i.emitter||et)(l.emit),e.run=function(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),a=2;n>a;a++)o[a-2]=arguments[a];var i=void 0;rt.iterator(e)?(i=e,e=t):(r(t,rt.func,Cf),r(i=t.apply(void 0,o),rt.iterator,Cf));var u=e.subscribe,c=e.dispatch,s=e.getState,f=e.context,l=e.sagaMonitor,p=e.logger,d=e.onError,h=at();l&&(l.effectTriggered=l.effectTriggered||Xe,l.effectResolved=l.effectResolved||Xe,l.effectRejected=l.effectRejected||Xe,l.effectCancelled=l.effectCancelled||Xe,l.actionDispatched=l.actionDispatched||Xe,l.effectTriggered({effectId:h,root:!0,parentEffectId:0,effect:{root:!0,saga:t,args:o}}));var g=S(i,u,lt(c),s,f,{sagaMonitor:l,logger:p,onError:d},h,t.name);return l&&l.effectResolved(h,g),g}.bind(null,{context:a,subscribe:l.subscribe,dispatch:f,getState:n,sagaMonitor:u,logger:c,onError:s}),function(e){return function(t){u&&u.actionDispatched&&u.actionDispatched(t);var r=e(t);return l.emit(t),r}}}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.context,a=void 0===n?{}:n,i=function(e,t){var r={};for(var n in e)0>t.indexOf(n)&&Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(t,["context"]),u=i.sagaMonitor,c=i.logger,s=i.onError;if(rt.func(i))throw Error("Saga middleware no longer accept Generator functions. Use sagaMiddleware.run instead");if(c&&!rt.func(c))throw Error("`options.logger` passed to the Saga middleware is not a function!");if(s&&!rt.func(s))throw Error("`options.onError` passed to the Saga middleware is not a function!");if(i.emitter&&!rt.func(i.emitter))throw Error("`options.emitter` passed to the Saga middleware is not a function!");return e.run=function(){throw Error("Before running a Saga, you must mount the Saga middleware on the Store using applyMiddleware")},e.setContext=function(e){r(e,rt.object,ft("sagaMiddleware",e)),nt.assign(a,e)},e}(),Nf=P(function(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];return function(e){return function(r,n,o){var a=e(r,n,o),i=a.dispatch,u=[],c={getState:a.getState,dispatch:function(e){return i(e)}};return u=t.map(function(e){return e(c)}),i=P.apply(void 0,u)(a.dispatch),dr({},a,{dispatch:i})}}}(Pf),window.devToolsExtension?window.devToolsExtension():function(e){return e})(C),Lf=Gs("PUBLIC_SEND_MESSAGE",function(e){return{customId:e.customId,text:e.text,promise:e.promise}}),Mf=(Gs("PUBLIC_INIT",function(e){return{license:e.license,group:e.group}}),Gs("PUBLIC_SET_VISITOR_DATA",function(e){return{name:e.name,email:e.email,customProperties:e.customProperties,pageUrl:e.pageUrl,pageTitle:e.pageTitle,promise:e.promise}})),Df=Gs("GET_VISITOR_DATA",function(e){return{promise:e.promise}}),Uf=(Gs("PUBLIC_CALLBACK_ERROR",function(e){return{errorMessage:e.errorMessage}}),Gs("PUBLIC_RATE_CHAT",function(e){return{rate:e.rate,comment:e.comment,promise:e.promise}})),Wf=Gs("PUBLIC_SET_SNEAK_PEEK",function(e){return{text:e.text,promise:e.promise}}),Ff=Gs("PUBLIC_FORWARD_CHAT_TRANSCRIPT",function(e){return{email:e.email,promise:e.promise}}),Bf=Gs("PUBLIC_CLOSE_CHAT",function(e){return{promise:e.promise}}),qf=Gs("PUBLIC_DISCONNECT",function(e){return{promise:e.promise}}),zf=Gs("PUBLIC_GET_TICKET_FORM",function(e){return{promise:e.promise}}),Gf=Gs("PUBLIC_SEND_TICKET_FORM",function(e){return{name:e.name,email:e.email,subject:e.subject,message:e.message,promise:e.promise}}),Vf=regeneratorRuntime.mark(ee),Hf=function(e){return w(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e;case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",null);case 9:case"end":return t.stop()}},t,this,[[0,6]])}))},Kf=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e},$f=function(e,t){if(e!==t){var r=void 0!==e,n=null===e,o=e==e,a=So(e),i=void 0!==t,u=null===t,c=t==t,s=So(t);if(!u&&!s&&!a&&e>t||a&&i&&c&&!u&&!s||n&&i&&c||!r&&c||!o)return 1;if(!n&&!a&&!s&&t>e||s&&r&&o&&!n&&!a||u&&r&&o||!i&&o||!c)return-1}return 0},Yf=function(e,t,r){for(var n=-1,o=e.criteria,a=t.criteria,i=o.length,u=r.length;++n<i;){var c=$f(o[n],a[n]);if(c)return u>n?c*("desc"==r[n]?-1:1):c}return e.index-t.index},Qf=function(e,t,r){var n=-1;t=Wc(t.length?t:[yr],ma(as));var o=Ls(e,function(e,r,o){return{criteria:Wc(t,function(t){return t(e)}),index:++n,value:e}});return Kf(o,function(e,t){return Yf(e,t,r)})},Zf=ms("sortBy",xf(function(e,t){if(null==e)return[];var r=t.length;return r>1&&_f(e,t[0],t[1])?t=[]:r>2&&_f(t[0],t[1],t[2])&&(t=[t[0]]),Qf(e,fs(t,1),[])}));Zf.placeholder=gr;var Jf=Zf,Xf=ms("fromPairs",function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var o=e[t];n[o[0]]=o[1]}return n});Xf.placeholder=gr;var el=Xf,tl=function(e,t,r){var n=e.length;return r=void 0===r?n:r,t||n>r?_s(e,t,r):e},rl=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),nl=function(e){return rl.test(e)},ol="[object RegExp]",al=function(e){return xn(e)&&Pr(e)==ol},il=ya&&ya.isRegExp,ul=il?ma(il):al,cl=function(e){return e.split("")},sl="[\\ud800-\\udfff]",fl="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ll="\\ud83c[\\udffb-\\udfff]",pl="[^\\ud800-\\udfff]",dl="(?:\\ud83c[\\udde6-\\uddff]){2}",hl="[\\ud800-\\udbff][\\udc00-\\udfff]",gl="(?:"+fl+"|"+ll+")"+"?",vl="[\\ufe0e\\ufe0f]?",ml=vl+gl+("(?:\\u200d(?:"+[pl,dl,hl].join("|")+")"+vl+gl+")*"),yl="(?:"+[pl+fl+"?",fl,dl,hl,sl].join("|")+")",bl=RegExp(ll+"(?="+ll+")|"+yl+ml,"g"),xl=function(e){return e.match(bl)||[]},_l=function(e){return nl(e)?xl(e):cl(e)},Il=4294967295,wl=ms("split",function(e,t,r){return r&&"number"!=typeof r&&_f(e,t,r)&&(t=r=void 0),(r=void 0===r?Il:r>>>0)?(e=Gc(e))&&("string"==typeof t||null!=t&&!ul(t))&&!(t=zc(t))&&nl(e)?tl(_l(e),0,r):e.split(t,r):[]});wl.placeholder=gr;var Al=wl,jl=xf(function(e,t){var r=co(t,to(jl));return Qo(e,64,void 0,t,r)});jl.placeholder={};var El=ms("partialRight",jl);El.placeholder=gr;var Tl=El,kl=function(e,t){for(var r=-1,n=e.length;++r<n&&zn(t,e[r],0)>-1;);return r},Ol=/^\s+/,Sl=ms("trimStart",function(e,t,r){if((e=Gc(e))&&(r||void 0===t))return e.replace(Ol,"");if(!e||!(t=zc(t)))return e;var n=_l(e),o=kl(n,_l(t));return tl(n,o).join("")});Sl.placeholder=gr;var Rl,Cl,Pl=Sl,Nl="__test_storage_support__",Ll=function(){var e=Object.defineProperties({},{getItem:{value:function(t){return e[t]||null}},setItem:{value:function(t,r){try{e[t]=r+""}catch(e){}}},removeItem:{value:function(t){delete e[t]}},clear:{value:function(){Object.keys(e).forEach(e.removeItem)}},key:{value:function(t){return Object.keys(e)[t]||null}},length:{get:function(){return Object.keys(e).length}}});return e}(),Ml="",Dl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"local";try{var t=window[e+"Storage"];return t.setItem(Nl,!0),t.getItem(Nl),t.removeItem(Nl),!0}catch(e){return!1}}()?window.localStorage:Ll,Ul={setItem:function(e,t){Dl.setItem(Ml+e,t)},getItem:function(e){return Dl.getItem(Ml+e)},removeItem:function(e){Dl.removeItem(Ml+e)},setPrefix:function(e){Ml=e}},Wl="function"==typeof fetch?fetch:function(e,t){return t=t||{},new Promise(function(r,n){function o(){var e,t=[],r=[],n={};return a.getAllResponseHeaders().replace(/^(.*?):\s*([\s\S]*?)$/gm,function(o,a,i){t.push(a=a.toLowerCase()),r.push([a,i]),n[a]=(e=n[a])?e+","+i:i}),{ok:1==(a.status/200|0),status:a.status,statusText:a.statusText,url:a.responseURL,clone:o,text:function(){return Promise.resolve(a.responseText)},json:function(){return Promise.resolve(a.responseText).then(JSON.parse)},xml:function(){return Promise.resolve(a.responseXML)},blob:function(){return Promise.resolve(new Blob([a.response]))},headers:{keys:function(){return t},entries:function(){return r},get:function(e){return n[e.toLowerCase()]},has:function(e){return e.toLowerCase()in n}}}}var a=new XMLHttpRequest;a.open(t.method||"get",e);for(var i in t.headers)a.setRequestHeader(i,t.headers[i]);a.withCredentials="include"==t.credentials,a.onload=function(){r(o())},a.onerror=n,a.send(t.body)})},Fl="production",Bl="staging",ql=(Rl={},Rl.labs="https://secure-labs.livechatinc.com",Rl[Bl]="https://secure-lc.livechatinc.com",Rl[Fl]="https://secure.livechatinc.com",Rl),zl=(Cl={},Cl.labs="https://api.labs.livechatinc.com",Cl[Bl]="https://api.staging.livechatinc.com",Cl[Fl]="https://api.livechatinc.com",Cl),Gl=function(e,t){return 1520===t?ql[Bl]:ql[e]},Vl=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.attempts||3,o=r.retryDelay||1e3;return new Promise(function(r,a){!function i(){Wl(e,t).then(function(e){return r(e)}).catch(function(e){return n?(--n,setTimeout(function(){i()},o)):a(e)})}()})},Hl=function(e,t,r){var n=t.body,o=function(e,t){return 1520===t?zl[Bl]:zl[e]}(t.environment,t.license)+"/"+e;return Vl(o,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(n)},r).then(function(e){return e.json()})},Kl=function(e,t,r){var n=t.environment,o=t.license,a=t.body,i=t.securedToken,u=t.secretId,c="status_ping"===e||-1!==e.indexOf("get_static_config")?"v2/":"",s=Gl(n,o)+"/licence/external/"+o+"/"+c+e;return i&&(s+="?secret_token="+i),u&&(s+="&secret_id="+u),Vl(s,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(a)},r).then(function(e){return e.json()})},$l=function(e,t,r,n,o){var a=Gl(e,t)+"/licence/external/"+t+"/tunnel_callback.cgi?"+function(e){for(var t="",r="0123456789abcdefghijklmnopqurstuvwxyzABCDEFGHIJKLMNOPQURSTUVWXYZ",n=0;e>n;n++)t+=r.substr(Math.floor(64*Math.random()),1);return t}(20);return n&&(a+="&secret_token="+n),o&&(a+="&secret_id="+o),a+="&command="+encodeURI(r),Vl(a,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(function(e){return e.text()}).then(function(e){return e.split("^")})},Yl=regeneratorRuntime.mark(te),Ql=regeneratorRuntime.mark(re),Zl=regeneratorRuntime.mark(ne),Jl=hf(el,Ds(hf(Ds(decodeURIComponent),Al("="))),Al("&"),Tl(Pl.convert({fixed:!1}),["?"])),Xl=function(e){return Kl("get_dynamic_config.js",Ks({},e,{body:{}}))},ep=function(e,t){return Kl("get_static_config."+t.group+"."+e+".js",Ks({},t,{body:{}}))},tp=regeneratorRuntime.mark(oe),rp=regeneratorRuntime.mark(ae),np=regeneratorRuntime.mark(ie),op=regeneratorRuntime.mark(ue),ap=function(e,t,r,n){var o={visitor:{id:t,group:r}};return e&&(o.page={title:n.pageTitle,url:n.pageUrl}),e&&n.email&&(o.visitor.email=n.email),e&&n.name&&(o.visitor.name=n.name),e&&n.customProperties&&(o.visitor.custom_variables=function(e){return Object.keys(e).map(function(t){return{name:t,value:e[t]}})}(n.customProperties)),o},ip=regeneratorRuntime.mark(ce),up=function(e){return e.agent_available?"ONLINE":"OFFLINE"},cp=regeneratorRuntime.mark(se),sp="CHATTING",fp="NOT_CHATTING",lp=regeneratorRuntime.mark(fe),pp=regeneratorRuntime.mark(le),dp=ms("get",Yc);dp.placeholder=gr;var hp=dp,gp=ms("isNil",function(e){return null==e},Ws);gp.placeholder=gr;var vp=gp,mp="Expected a function",yp=function(e){if("function"!=typeof e)throw new TypeError(mp);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}},bp=function(e,t,r,n){if(!Nr(e))return e;for(var o=-1,a=(t=Vc(t,e)).length,i=a-1,u=e;null!=u&&++o<a;){var c=Kc(t[o]),s=r;if(o!=i){var f=u[c];void 0===(s=n?n(f,c,u):void 0)&&(s=Nr(f)?f:oo(t[o+1])?[]:{})}ra(u,c,s),u=u[c]}return e},xp=function(e,t,r){for(var n=-1,o=t.length,a={};++n<o;){var i=t[n],u=$c(e,i);r(u,i)&&bp(a,Vc(i,e),u)}return a},_p=function(e,t){if(null==e)return{};var r=Wc(ki(e),function(e){return[e]});return t=as(t),xp(e,r,function(e,r){return t(e,r[0])})},Ip=ms("omitBy",function(e,t){return _p(e,yp(as(t)))});Ip.placeholder=gr;var wp=Ip,Ap=ms("merge",If);Ap.placeholder=gr;var jp=Ap,Ep=function(e,t){return xp(e,t,function(t,r){return Jc(e,r)})},Tp=ms("pick",hs(function(e,t){return null==e?{}:Ep(e,t)}));Tp.placeholder=gr;var kp=Tp,Op=ms("identity",yr,Ws);Op.placeholder=gr;var Sp=Op,Rp=function(e,t,r){var n;return r(e,function(e,r,o){if(t(e,r,o))return n=r,!1}),n},Cp=ms("findKey",function(e,t){return Rp(e,as(t,3),Ps)});Cp.placeholder=gr;var Pp,Np=Cp,Lp=function(e){return e.replace(/[\x01-\x08\x0B\x0C\x0E-\x1F\x7F]/g,"")},Mp=function(e){return"1"===e},Dp=(Pp={},Pp.none="0",Pp.bad="1",Pp.good="2",Pp),Up={NEW_AGENT:"newAgent",NEW_AGENT_MESSAGE:"newAgentMessage",CHAT_ENDED:"chatEnded",VISITOR_QUEUED:"visitorQueued",TYPING_INDICATOR:"typingIndicator",RATE_CHAT:"rateChat",FORWARD_CHAT_TRANSCRIPT:"forwardChatTranscript"},Wp={IWCS0002R:[Up.NEW_AGENT,{1:["id"],2:["name"],12:["chatId"],23:["avatarUrl"],25:["jobTitle"]}],IWCS0006R:[Up.NEW_AGENT_MESSAGE,{1:["authorId"],2:["message"],9:["isMobile",Mp],10:["id"]}],IWCS1007S:[Up.CHAT_ENDED,null],IWCS1002S:[Up.VISITOR_QUEUED,{2:["numberInQueue",parseInt],3:["waitingTime",parseInt]}],IWCS0002P:[Up.TYPING_INDICATOR,{2:["realCommand",function(e){var t=e.split("&#45;");return{authorId:t[1],isTyping:Mp(t[2])}}]}],IWCS0113C:[Up.RATE_CHAT,{1:["visitorId"],2:["chatId"],3:["rate",function(e){return Dp[e]}]}],IWCS0069C:[Up.FORWARD_CHAT_TRANSCRIPT,{1:["visitorId"],2:["email"],5:["chatId"]}]},Fp=function(e,t){for(var r=Np(function(t){return t[0]===e},Wp),n=Wp[r][1],o=Math.max.apply(Math,Object.keys(n)),a=[r];o+1>a.length;){var i=n[a.length];if(i){var u=Lp(t[i[0]]).replace(/\^/g,"&#94;");a.push(i[1]?i[1](u):u)}else a.push("")}return a.join("^")+"^"},Bp=regeneratorRuntime.mark(pe),qp=regeneratorRuntime.mark(de),zp=regeneratorRuntime.mark(he),Gp=regeneratorRuntime.mark(ge),Vp=regeneratorRuntime.mark(ve),Hp=regeneratorRuntime.mark(me),Kp=regeneratorRuntime.mark(ye),$p=regeneratorRuntime.mark(be),Yp=regeneratorRuntime.mark(xe),Qp=regeneratorRuntime.mark(_e),Zp=regeneratorRuntime.mark(Ie),Jp=Lf,Xp=Mf,ed=Df,td=Uf,rd=Wf,nd=Ff,od=Bf,ad=qf,id=zf,ud=Gf,cd="chat_started",sd="new_message",fd="chat_ended",ld="agent_changed",pd="status_changed",dd="connection_status_changed",hd="new_file",gd="visitor_queued",vd="typing_indicator",md="visitor_data",yd=regeneratorRuntime.mark(we),bd=regeneratorRuntime.mark(Ee),xd=regeneratorRuntime.mark(Te),_d=regeneratorRuntime.mark(Re),Id=regeneratorRuntime.mark(Ce),wd=Gs("INCOMING_MESSAGE",function(e){return{name:e.name,message:e.message}}),Ad=ms("mapKeys",function(e,t){var r={};return t=as(t,3),Ps(e,function(e,n,o){Xo(r,t(e,n,o),e)}),r});Ad.placeholder=gr;var jd=Ad,Ed=function(e){return function(t){t=Gc(t);var r=nl(t)?_l(t):void 0,n=r?r[0]:t.charAt(0),o=r?tl(r,1).join(""):t.slice(1);return n[e]()+o}}("toUpperCase"),Td=function(e){return Ed(Gc(e).toLowerCase())},kd=function(e){return function(t){return null==e?void 0:e[t]}}({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),Od=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Sd=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),Rd=function(e){return(e=Gc(e))&&e.replace(Od,kd).replace(Sd,"")},Cd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Pd=function(e){return e.match(Cd)||[]},Nd=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ld=function(e){return Nd.test(e)},Md="a-z\\xdf-\\xf6\\xf8-\\xff",Dd="A-Z\\xc0-\\xd6\\xd8-\\xde",Ud="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Wd="["+Ud+"]",Fd="\\d+",Bd="[\\u2700-\\u27bf]",qd="["+Md+"]",zd="[^\\ud800-\\udfff"+Ud+Fd+"\\u2700-\\u27bf"+Md+Dd+"]",Gd="(?:\\ud83c[\\udde6-\\uddff]){2}",Vd="[\\ud800-\\udbff][\\udc00-\\udfff]",Hd="["+Dd+"]",Kd="(?:"+qd+"|"+zd+")",$d="(?:"+Hd+"|"+zd+")",Yd="(?:['](?:d|ll|m|re|s|t|ve))?",Qd="(?:['](?:D|LL|M|RE|S|T|VE))?",Zd="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Jd="[\\ufe0e\\ufe0f]?",Xd=Jd+Zd+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",Gd,Vd].join("|")+")"+Jd+Zd+")*"),eh="(?:"+[Bd,Gd,Vd].join("|")+")"+Xd,th=RegExp([Hd+"?"+qd+"+"+Yd+"(?="+[Wd,Hd,"$"].join("|")+")",$d+"+"+Qd+"(?="+[Wd,Hd+Kd,"$"].join("|")+")",Hd+"?"+Kd+"+"+Yd,Hd+"+"+Qd,"\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)|\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",Fd,eh].join("|"),"g"),rh=function(e){return e.match(th)||[]},nh=function(e,t,r){return e=Gc(e),void 0===(t=r?void 0:t)?Ld(e)?rh(e):Pd(e):e.match(t)||[]},oh=RegExp("[']","g"),ah=ms("camelCase",function(e){return function(t){return $i(nh(Rd(t).replace(oh,"")),e,"")}}(function(e,t,r){return t=t.toLowerCase(),e+(r?Td(t):t)}),Ws);ah.placeholder=gr;var ih=ah,uh=regeneratorRuntime.mark(Pe),ch=regeneratorRuntime.mark(Ne),sh=regeneratorRuntime.mark(Le),fh=regeneratorRuntime.mark(Me),lh=regeneratorRuntime.mark(De),ph="",dh=function(e){return hp("message.data",e)&&(e.message.data=jd(ih,e.message.data)),hp("message.name",e)&&(e.message.name=ih(e.message.name)),Ks({timestamp:e.timestamp,uniqueId:e.unique_id},e.message)},hh=function(e){return Math.max.apply(Math,[0].concat(e.map(function(e){return e.unique_id})))},gh=function(e){return e.messages.map(function(e){if(e.message_iwcs){var t=function(e){var t=e.split("^"),r=t[0],n=t.slice(1),o=Wp[r];if(!o)return null;var a=o[1];return{name:o[0],data:n.reduce(function(e,t,r){if(!a||!a[r+1])return e;var n=a[r+1],o=n[0],i=n[1],u=void 0===i?Sp:i;return"realCommand"===o?Ks({},e,u(t)):(e[o]=u(t),e)},{})}}(e.message_iwcs);return!!t&&{timestamp:e.timestamp,unique_id:e.unique_id,message:t}}return e}).map(dh).filter(Boolean)},vh="sendMessage",mh="startChat",yh="chatAttachment",bh=regeneratorRuntime.mark(Ue),xh=regeneratorRuntime.mark(We),_h=regeneratorRuntime.mark(Fe),Ih=regeneratorRuntime.mark(Be),wh=[Lf,Mf].map(function(e){return e.getActionName()}),Ah="undefined"!=typeof document;e.init=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.license,n=t.group,o=void 0===n?0:n,i=t.environment,u=void 0===i?Fl:i,c=new function(e){return e=e||Object.create(null),{on:function(t,r){(e[t]||(e[t]=[])).push(r)},off:function(t,r){e[t]&&e[t].splice(e[t].indexOf(r)>>>0,1)},emit:function(t,r){(e[t]||[]).map(function(e){e(r)}),(e["*"]||[]).map(function(e){e(t,r)})}}};if(!r)throw Error("Missing license parameter");if(u!==Fl&&"labs"!==u&&u!==Bl)throw Error("Wrong environment parameter");var s=Math.random()+"";Ul.setPrefix("_livechat_"+r);var f=function(e){var t=Nf(Rf,e);return t.runSaga=Pf.run,t}((e={environment:u},e[$s.LICENSE]=r,e[$s.GROUP]=o,e[$s.SESSION_ID]=s,e.visitorData={pageUrl:bs("unknown","location.href",Ah&&document),pageTitle:bs("unknown","[0].innerHTML",Ah&&document.getElementsByTagName("title")||{})},e[$s.SECURED_TOKEN]=Ul.getItem("securedToken"),e[$s.SECRET_ID]=Ul.getItem("secretId"),e)),l=Ul.getItem("visitorId"),p=f.runSaga(Be,{emitter:c});return l&&f.dispatch(Ys.setPropertyVisitorId(l)),{sendMessage:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.text,n=t.customId,o=a();return r&&n?(e.dispatch(Lf({customId:n,text:r,promise:o})),o.promise):(o.reject({type:"missing argument",reason:"Missing text or customId parameter"}),o.promise)}}(f),setSneakPeek:function(e){return function(t){var r=t.text,n=a();return e.dispatch(Wf({text:r,promise:n})),n.promise}}(f),setVisitorData:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.name,n=t.email,o=t.customProperties,i=t.pageUrl,u=t.pageTitle,c=a();return r||n||o||i||u?(e.dispatch(Mf({name:r,email:n,customProperties:o,pageUrl:i,pageTitle:u,promise:c})),c.promise):(c.reject({type:"missing argument",reason:"Missing name, email, url or customProperties"}),c.promise)}}(f),getVisitorData:function(e){return function(){var t=a();return e.dispatch(Df({promise:t})),t.promise}}(f),rateChat:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.rate,n=t.comment,o=a();return r?"good"!==r&&"none"!==r&&"bad"!==r?(o.reject({type:"wrong argument",reason:'Rate argument should be equal "good", "bad" or "none"'}),o.promise):(e.dispatch(Uf({rate:r,comment:n,promise:o})),o.promise):(o.reject({type:"missing argument",reason:"Missing rate parameter"}),o.promise)}}(f),forwardChatTranscript:function(e){return function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).email,r=a();return t?(e.dispatch(Ff({email:t,promise:r})),r.promise):(r.reject({type:"missing argument",reason:"Missing email parameter"}),r.promise)}}(f),closeChat:function(e){return function(){var t=a();return e.dispatch(Bf({promise:t})),t.promise}}(f),disconnect:function(e){return function(){var t=a();return e.dispatch(qf({promise:t})),t.promise}}(f),getTicketForm:function(e){return function(){var t=a();return e.dispatch(zf({promise:t})),t.promise}}(f),sendTicketForm:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.name,n=t.email,o=t.subject,i=t.message,u=a();return n?i?(e.dispatch(Gf({name:r,email:n,subject:o,message:i,promise:u})),u.promise):(u.reject({type:"missing argument",reason:"Missing message"}),u.promise):(u.reject({type:"missing argument",reason:"Missing email"}),u.promise)}}(f),on:c.on,destroy:function(e,t){return function(){t.off("*"),e.cancel()}}(p,c)}},Object.defineProperty(e,"__esModule",{value:!0})});
